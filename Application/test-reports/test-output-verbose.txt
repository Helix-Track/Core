	helixtrack.ru/core		coverage: 0.0% of statements
=== RUN   TestNewInMemoryCache
--- PASS: TestNewInMemoryCache (0.00s)
=== RUN   TestCache_SetAndGet
--- PASS: TestCache_SetAndGet (0.00s)
=== RUN   TestCache_GetNonExistent
--- PASS: TestCache_GetNonExistent (0.00s)
=== RUN   TestCache_Expiration
--- PASS: TestCache_Expiration (0.15s)
=== RUN   TestCache_Delete
--- PASS: TestCache_Delete (0.00s)
=== RUN   TestCache_Clear
--- PASS: TestCache_Clear (0.00s)
=== RUN   TestCache_MaxSize
--- PASS: TestCache_MaxSize (0.00s)
=== RUN   TestCache_Statistics
--- PASS: TestCache_Statistics (0.00s)
=== RUN   TestCache_ComplexTypes
--- PASS: TestCache_ComplexTypes (0.00s)
=== RUN   TestCache_Cleanup
--- PASS: TestCache_Cleanup (0.20s)
=== RUN   TestBuildCacheKey
=== RUN   TestBuildCacheKey/Single_component
=== RUN   TestBuildCacheKey/Multiple_components
=== RUN   TestBuildCacheKey/Empty_components
--- PASS: TestBuildCacheKey (0.00s)
    --- PASS: TestBuildCacheKey/Single_component (0.00s)
    --- PASS: TestBuildCacheKey/Multiple_components (0.00s)
    --- PASS: TestBuildCacheKey/Empty_components (0.00s)
=== RUN   TestCachedQuery
--- PASS: TestCachedQuery (0.00s)
=== RUN   TestCachedQuery_Error
--- PASS: TestCachedQuery_Error (0.00s)
=== RUN   TestCache_ConcurrentAccess
--- PASS: TestCache_ConcurrentAccess (0.00s)
PASS
coverage: 96.4% of statements
ok  	helixtrack.ru/core/internal/cache	1.374s	coverage: 96.4% of statements
=== RUN   TestLoadConfig
=== RUN   TestLoadConfig/Valid_minimal_configuration
=== RUN   TestLoadConfig/PostgreSQL_configuration
=== RUN   TestLoadConfig/HTTPS_configuration
=== RUN   TestLoadConfig/Invalid_JSON
=== RUN   TestLoadConfig/Missing_listeners
=== RUN   TestLoadConfig/Invalid_database_type
--- PASS: TestLoadConfig (0.00s)
    --- PASS: TestLoadConfig/Valid_minimal_configuration (0.00s)
    --- PASS: TestLoadConfig/PostgreSQL_configuration (0.00s)
    --- PASS: TestLoadConfig/HTTPS_configuration (0.00s)
    --- PASS: TestLoadConfig/Invalid_JSON (0.00s)
    --- PASS: TestLoadConfig/Missing_listeners (0.00s)
    --- PASS: TestLoadConfig/Invalid_database_type (0.00s)
=== RUN   TestConfig_ApplyDefaults
--- PASS: TestConfig_ApplyDefaults (0.00s)
=== RUN   TestConfig_Validate
=== RUN   TestConfig_Validate/Valid_configuration
=== RUN   TestConfig_Validate/No_listeners
=== RUN   TestConfig_Validate/Invalid_port
=== RUN   TestConfig_Validate/HTTPS_without_cert
=== RUN   TestConfig_Validate/Invalid_database_type
=== RUN   TestConfig_Validate/PostgreSQL_missing_host
--- PASS: TestConfig_Validate (0.00s)
    --- PASS: TestConfig_Validate/Valid_configuration (0.00s)
    --- PASS: TestConfig_Validate/No_listeners (0.00s)
    --- PASS: TestConfig_Validate/Invalid_port (0.00s)
    --- PASS: TestConfig_Validate/HTTPS_without_cert (0.00s)
    --- PASS: TestConfig_Validate/Invalid_database_type (0.00s)
    --- PASS: TestConfig_Validate/PostgreSQL_missing_host (0.00s)
=== RUN   TestConfig_GetPrimaryListener
--- PASS: TestConfig_GetPrimaryListener (0.00s)
=== RUN   TestConfig_GetPrimaryListener_NoListeners
--- PASS: TestConfig_GetPrimaryListener_NoListeners (0.00s)
=== RUN   TestConfig_GetListenerAddress
=== RUN   TestConfig_GetListenerAddress/With_listener
=== RUN   TestConfig_GetListenerAddress/No_listeners
--- PASS: TestConfig_GetListenerAddress (0.00s)
    --- PASS: TestConfig_GetListenerAddress/With_listener (0.00s)
    --- PASS: TestConfig_GetListenerAddress/No_listeners (0.00s)
=== RUN   TestServiceEndpoint_Marshal
--- PASS: TestServiceEndpoint_Marshal (0.00s)
=== RUN   TestLoadConfig_FileNotFound
--- PASS: TestLoadConfig_FileNotFound (0.00s)
PASS
coverage: 83.5% of statements
ok  	helixtrack.ru/core/internal/config	1.021s	coverage: 83.5% of statements
=== RUN   TestNewDatabase_SQLite
--- PASS: TestNewDatabase_SQLite (0.00s)
=== RUN   TestNewDatabase_SQLite_ForeignKeys
--- PASS: TestNewDatabase_SQLite_ForeignKeys (0.00s)
=== RUN   TestNewDatabase_InvalidType
--- PASS: TestNewDatabase_InvalidType (0.00s)
=== RUN   TestNewDatabase_InvalidPath
--- PASS: TestNewDatabase_InvalidPath (0.00s)
=== RUN   TestDatabase_Query
--- PASS: TestDatabase_Query (0.01s)
=== RUN   TestDatabase_QueryRow
--- PASS: TestDatabase_QueryRow (0.01s)
=== RUN   TestDatabase_QueryRow_NotFound
--- PASS: TestDatabase_QueryRow_NotFound (0.00s)
=== RUN   TestDatabase_Exec
--- PASS: TestDatabase_Exec (0.02s)
=== RUN   TestDatabase_Begin
--- PASS: TestDatabase_Begin (0.01s)
=== RUN   TestDatabase_Close
--- PASS: TestDatabase_Close (0.00s)
=== RUN   TestDatabase_Ping
--- PASS: TestDatabase_Ping (0.00s)
=== RUN   TestDatabase_GetType
--- PASS: TestDatabase_GetType (0.00s)
=== RUN   TestDatabase_ContextCancellation
--- PASS: TestDatabase_ContextCancellation (0.01s)
=== RUN   TestNewDatabase_SQLite_FileCreation
--- PASS: TestNewDatabase_SQLite_FileCreation (0.00s)
=== RUN   TestDefaultOptimizationConfig
--- PASS: TestDefaultOptimizationConfig (0.00s)
=== RUN   TestNewOptimizedDatabase_SQLite
--- PASS: TestNewOptimizedDatabase_SQLite (0.00s)
=== RUN   TestNewOptimizedDatabase_SQLite_WithEncryption
--- PASS: TestNewOptimizedDatabase_SQLite_WithEncryption (0.01s)
=== RUN   TestNewOptimizedDatabase_SQLite_CustomOptimizations
--- PASS: TestNewOptimizedDatabase_SQLite_CustomOptimizations (0.00s)
=== RUN   TestNewOptimizedDatabase_InvalidType
--- PASS: TestNewOptimizedDatabase_InvalidType (0.00s)
=== RUN   TestOptimizedDatabase_PreparedQuery
--- PASS: TestOptimizedDatabase_PreparedQuery (0.00s)
=== RUN   TestOptimizedDatabase_PreparedQueryRow
--- PASS: TestOptimizedDatabase_PreparedQueryRow (0.00s)
=== RUN   TestOptimizedDatabase_PreparedExec
--- PASS: TestOptimizedDatabase_PreparedExec (0.00s)
=== RUN   TestOptimizedDatabase_GetStats
--- PASS: TestOptimizedDatabase_GetStats (0.00s)
=== RUN   TestOptimizedDatabase_ClearPreparedStatements
--- PASS: TestOptimizedDatabase_ClearPreparedStatements (0.00s)
=== RUN   TestOptimizedDatabase_StatementCaching
--- PASS: TestOptimizedDatabase_StatementCaching (0.00s)
=== RUN   TestOptimizedDatabase_QueryMetrics
--- PASS: TestOptimizedDatabase_QueryMetrics (0.00s)
=== RUN   TestOptimizedDatabase_Close
--- PASS: TestOptimizedDatabase_Close (0.00s)
=== RUN   TestOptimizedDatabase_ConcurrentPreparedQueries
--- PASS: TestOptimizedDatabase_ConcurrentPreparedQueries (0.01s)
=== RUN   TestOptimizedDatabase_MultipleStatements
--- PASS: TestOptimizedDatabase_MultipleStatements (0.00s)
PASS
coverage: 79.6% of statements
ok  	helixtrack.ru/core/internal/database	1.103s	coverage: 79.6% of statements
=== RUN   TestAccountHandler_Create_Success
--- PASS: TestAccountHandler_Create_Success (0.00s)
=== RUN   TestAccountHandler_Create_MinimalFields
--- PASS: TestAccountHandler_Create_MinimalFields (0.00s)
=== RUN   TestAccountHandler_Create_MissingTitle
--- PASS: TestAccountHandler_Create_MissingTitle (0.00s)
=== RUN   TestAccountHandler_Create_EmptyTitle
--- PASS: TestAccountHandler_Create_EmptyTitle (0.00s)
=== RUN   TestAccountHandler_Read_NotImplemented
--- PASS: TestAccountHandler_Read_NotImplemented (0.00s)
=== RUN   TestAccountHandler_Read_MissingID
--- PASS: TestAccountHandler_Read_MissingID (0.00s)
=== RUN   TestAccountHandler_List_EmptyList
--- PASS: TestAccountHandler_List_EmptyList (0.00s)
=== RUN   TestAccountHandler_Modify_Success
--- PASS: TestAccountHandler_Modify_Success (0.00s)
=== RUN   TestAccountHandler_Modify_MissingID
--- PASS: TestAccountHandler_Modify_MissingID (0.00s)
=== RUN   TestAccountHandler_Remove_Success
--- PASS: TestAccountHandler_Remove_Success (0.00s)
=== RUN   TestAccountHandler_Remove_MissingID
--- PASS: TestAccountHandler_Remove_MissingID (0.00s)
=== RUN   TestAccountHandler_StubBehaviorDocumentation
    account_handler_test.go:425: Account handler is currently a stub implementation
    account_handler_test.go:426: See TODO comments in account_handler.go for database implementation tasks
--- PASS: TestAccountHandler_StubBehaviorDocumentation (0.00s)
=== RUN   TestActivityStreamHandler_Get_Success
--- PASS: TestActivityStreamHandler_Get_Success (0.01s)
=== RUN   TestActivityStreamHandler_Get_WithPagination
--- PASS: TestActivityStreamHandler_Get_WithPagination (0.01s)
=== RUN   TestActivityStreamHandler_Get_OnlyPublic
--- PASS: TestActivityStreamHandler_Get_OnlyPublic (0.01s)
=== RUN   TestActivityStreamHandler_Get_Unauthorized
--- PASS: TestActivityStreamHandler_Get_Unauthorized (0.01s)
=== RUN   TestActivityStreamHandler_GetByProject_Success
--- PASS: TestActivityStreamHandler_GetByProject_Success (0.01s)
=== RUN   TestActivityStreamHandler_GetByProject_MissingProjectID
--- PASS: TestActivityStreamHandler_GetByProject_MissingProjectID (0.01s)
=== RUN   TestActivityStreamHandler_GetByUser_Success
--- PASS: TestActivityStreamHandler_GetByUser_Success (0.01s)
=== RUN   TestActivityStreamHandler_GetByUser_MissingUserID
--- PASS: TestActivityStreamHandler_GetByUser_MissingUserID (0.01s)
=== RUN   TestActivityStreamHandler_GetByTicket_Success
--- PASS: TestActivityStreamHandler_GetByTicket_Success (0.01s)
=== RUN   TestActivityStreamHandler_GetByTicket_MissingTicketID
--- PASS: TestActivityStreamHandler_GetByTicket_MissingTicketID (0.01s)
=== RUN   TestActivityStreamHandler_Filter_Success
--- PASS: TestActivityStreamHandler_Filter_Success (0.01s)
=== RUN   TestActivityStreamHandler_Filter_MissingActivityType
--- PASS: TestActivityStreamHandler_Filter_MissingActivityType (0.01s)
=== RUN   TestActivityStreamHandler_Filter_WithUserFilter
--- PASS: TestActivityStreamHandler_Filter_WithUserFilter (0.01s)
=== RUN   TestActivityStreamHandler_Filter_WithEntityTypeFilter
--- PASS: TestActivityStreamHandler_Filter_WithEntityTypeFilter (0.01s)
=== RUN   TestAssetHandler_Create_Success
--- PASS: TestAssetHandler_Create_Success (0.00s)
=== RUN   TestAssetHandler_Create_MinimalFields
--- PASS: TestAssetHandler_Create_MinimalFields (0.00s)
=== RUN   TestAssetHandler_Create_MissingURL
--- PASS: TestAssetHandler_Create_MissingURL (0.00s)
=== RUN   TestAssetHandler_Create_Unauthorized
--- PASS: TestAssetHandler_Create_Unauthorized (0.00s)
=== RUN   TestAssetHandler_Read_Success
--- PASS: TestAssetHandler_Read_Success (0.00s)
=== RUN   TestAssetHandler_Read_NotFound
--- PASS: TestAssetHandler_Read_NotFound (0.00s)
=== RUN   TestAssetHandler_Read_MissingID
--- PASS: TestAssetHandler_Read_MissingID (0.00s)
=== RUN   TestAssetHandler_List_EmptyList
--- PASS: TestAssetHandler_List_EmptyList (0.00s)
=== RUN   TestAssetHandler_List_MultipleAssets
--- PASS: TestAssetHandler_List_MultipleAssets (0.00s)
=== RUN   TestAssetHandler_List_ExcludesDeleted
--- PASS: TestAssetHandler_List_ExcludesDeleted (0.00s)
=== RUN   TestAssetHandler_Modify_Success
--- PASS: TestAssetHandler_Modify_Success (0.00s)
=== RUN   TestAssetHandler_Modify_PartialUpdate
--- PASS: TestAssetHandler_Modify_PartialUpdate (0.00s)
=== RUN   TestAssetHandler_Modify_NotFound
--- PASS: TestAssetHandler_Modify_NotFound (0.00s)
=== RUN   TestAssetHandler_Modify_NoFields
--- PASS: TestAssetHandler_Modify_NoFields (0.00s)
=== RUN   TestAssetHandler_Remove_Success
--- PASS: TestAssetHandler_Remove_Success (0.00s)
=== RUN   TestAssetHandler_Remove_NotFound
--- PASS: TestAssetHandler_Remove_NotFound (0.00s)
=== RUN   TestAssetHandler_AddTicket_Success
--- PASS: TestAssetHandler_AddTicket_Success (0.00s)
=== RUN   TestAssetHandler_RemoveTicket_Success
--- PASS: TestAssetHandler_RemoveTicket_Success (0.00s)
=== RUN   TestAssetHandler_ListTickets_Success
--- PASS: TestAssetHandler_ListTickets_Success (0.00s)
=== RUN   TestAssetHandler_AddComment_Success
--- PASS: TestAssetHandler_AddComment_Success (0.00s)
=== RUN   TestAssetHandler_RemoveComment_Success
--- PASS: TestAssetHandler_RemoveComment_Success (0.00s)
=== RUN   TestAssetHandler_ListComments_Success
--- PASS: TestAssetHandler_ListComments_Success (0.00s)
=== RUN   TestAssetHandler_AddProject_Success
--- PASS: TestAssetHandler_AddProject_Success (0.00s)
=== RUN   TestAssetHandler_RemoveProject_Success
--- PASS: TestAssetHandler_RemoveProject_Success (0.00s)
=== RUN   TestAssetHandler_ListProjects_Success
--- PASS: TestAssetHandler_ListProjects_Success (0.00s)
=== RUN   TestAssetHandler_FullCRUDCycle
--- PASS: TestAssetHandler_FullCRUDCycle (0.00s)
=== RUN   TestAuditHandler_Create_Success
--- PASS: TestAuditHandler_Create_Success (0.00s)
=== RUN   TestAuditHandler_Create_MissingAction
--- PASS: TestAuditHandler_Create_MissingAction (0.00s)
=== RUN   TestAuditHandler_Create_InvalidAction
--- PASS: TestAuditHandler_Create_InvalidAction (0.00s)
=== RUN   TestAuditHandler_Create_Unauthorized
--- PASS: TestAuditHandler_Create_Unauthorized (0.00s)
=== RUN   TestAuditHandler_Read_Success
--- PASS: TestAuditHandler_Read_Success (0.00s)
=== RUN   TestAuditHandler_Read_NotFound
--- PASS: TestAuditHandler_Read_NotFound (0.00s)
=== RUN   TestAuditHandler_Read_MissingID
--- PASS: TestAuditHandler_Read_MissingID (0.00s)
=== RUN   TestAuditHandler_List_EmptyList
--- PASS: TestAuditHandler_List_EmptyList (0.00s)
=== RUN   TestAuditHandler_List_MultipleEntries
--- PASS: TestAuditHandler_List_MultipleEntries (0.00s)
=== RUN   TestAuditHandler_List_ExcludesDeleted
--- PASS: TestAuditHandler_List_ExcludesDeleted (0.00s)
=== RUN   TestAuditHandler_Query_ByUserID
--- PASS: TestAuditHandler_Query_ByUserID (0.00s)
=== RUN   TestAuditHandler_Query_ByAction
--- PASS: TestAuditHandler_Query_ByAction (0.00s)
=== RUN   TestAuditHandler_Query_ByTimeRange
--- PASS: TestAuditHandler_Query_ByTimeRange (0.00s)
=== RUN   TestAuditHandler_Query_MultipleFilters
--- PASS: TestAuditHandler_Query_MultipleFilters (0.00s)
=== RUN   TestAuditHandler_AddMeta_Success
--- PASS: TestAuditHandler_AddMeta_Success (0.00s)
=== RUN   TestAuditHandler_AddMeta_MissingAuditID
--- PASS: TestAuditHandler_AddMeta_MissingAuditID (0.00s)
=== RUN   TestAuditHandler_AddMeta_MissingProperty
--- PASS: TestAuditHandler_AddMeta_MissingProperty (0.00s)
=== RUN   TestAuthHandler_Register_Success
--- PASS: TestAuthHandler_Register_Success (3.10s)
=== RUN   TestAuthHandler_Register_MissingUsername
2025-10-16T20:36:29.955+0300	ERROR	logger/logger.go:131	Failed to bind registration request	{"error": "Key: 'UserRegistrationRequest.Username' Error:Field validation for 'Username' failed on the 'required' tag"}
helixtrack.ru/core/internal/logger.Error
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/logger/logger.go:131
helixtrack.ru/core/internal/handlers.(*AuthHandler).Register
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/auth_handler.go:38
helixtrack.ru/core/internal/handlers.TestAuthHandler_Register_MissingUsername
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/auth_handler_test.go:107
testing.tRunner
	/usr/lib/go-1.22/src/testing/testing.go:1689
--- PASS: TestAuthHandler_Register_MissingUsername (2.51s)
=== RUN   TestAuthHandler_Register_MissingPassword
2025-10-16T20:36:32.467+0300	ERROR	logger/logger.go:131	Failed to bind registration request	{"error": "Key: 'UserRegistrationRequest.Password' Error:Field validation for 'Password' failed on the 'required' tag"}
helixtrack.ru/core/internal/logger.Error
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/logger/logger.go:131
helixtrack.ru/core/internal/handlers.(*AuthHandler).Register
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/auth_handler.go:38
helixtrack.ru/core/internal/handlers.TestAuthHandler_Register_MissingPassword
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/auth_handler_test.go:137
testing.tRunner
	/usr/lib/go-1.22/src/testing/testing.go:1689
--- PASS: TestAuthHandler_Register_MissingPassword (2.51s)
=== RUN   TestAuthHandler_Register_MissingEmail
2025-10-16T20:36:34.925+0300	ERROR	logger/logger.go:131	Failed to bind registration request	{"error": "Key: 'UserRegistrationRequest.Email' Error:Field validation for 'Email' failed on the 'required' tag"}
helixtrack.ru/core/internal/logger.Error
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/logger/logger.go:131
helixtrack.ru/core/internal/handlers.(*AuthHandler).Register
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/auth_handler.go:38
helixtrack.ru/core/internal/handlers.TestAuthHandler_Register_MissingEmail
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/auth_handler_test.go:167
testing.tRunner
	/usr/lib/go-1.22/src/testing/testing.go:1689
--- PASS: TestAuthHandler_Register_MissingEmail (2.46s)
=== RUN   TestAuthHandler_Register_MissingName
2025-10-16T20:36:37.384+0300	ERROR	logger/logger.go:131	Failed to bind registration request	{"error": "Key: 'UserRegistrationRequest.Name' Error:Field validation for 'Name' failed on the 'required' tag"}
helixtrack.ru/core/internal/logger.Error
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/logger/logger.go:131
helixtrack.ru/core/internal/handlers.(*AuthHandler).Register
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/auth_handler.go:38
helixtrack.ru/core/internal/handlers.TestAuthHandler_Register_MissingName
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/auth_handler_test.go:197
testing.tRunner
	/usr/lib/go-1.22/src/testing/testing.go:1689
--- PASS: TestAuthHandler_Register_MissingName (2.46s)
=== RUN   TestAuthHandler_Register_InvalidEmail
2025-10-16T20:36:39.855+0300	ERROR	logger/logger.go:131	Failed to bind registration request	{"error": "Key: 'UserRegistrationRequest.Email' Error:Field validation for 'Email' failed on the 'email' tag"}
helixtrack.ru/core/internal/logger.Error
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/logger/logger.go:131
helixtrack.ru/core/internal/handlers.(*AuthHandler).Register
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/auth_handler.go:38
helixtrack.ru/core/internal/handlers.TestAuthHandler_Register_InvalidEmail
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/auth_handler_test.go:228
testing.tRunner
	/usr/lib/go-1.22/src/testing/testing.go:1689
--- PASS: TestAuthHandler_Register_InvalidEmail (2.47s)
=== RUN   TestAuthHandler_Register_PasswordTooShort
2025-10-16T20:36:42.317+0300	ERROR	logger/logger.go:131	Failed to bind registration request	{"error": "Key: 'UserRegistrationRequest.Password' Error:Field validation for 'Password' failed on the 'min' tag"}
helixtrack.ru/core/internal/logger.Error
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/logger/logger.go:131
helixtrack.ru/core/internal/handlers.(*AuthHandler).Register
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/auth_handler.go:38
helixtrack.ru/core/internal/handlers.TestAuthHandler_Register_PasswordTooShort
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/auth_handler_test.go:259
testing.tRunner
	/usr/lib/go-1.22/src/testing/testing.go:1689
--- PASS: TestAuthHandler_Register_PasswordTooShort (2.46s)
=== RUN   TestAuthHandler_Register_DuplicateUsername
2025-10-16T20:36:46.037+0300	ERROR	logger/logger.go:131	Failed to create user	{"error": "UNIQUE constraint failed: users.username"}
helixtrack.ru/core/internal/logger.Error
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/logger/logger.go:131
helixtrack.ru/core/internal/handlers.(*AuthHandler).Register
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/auth_handler.go:93
helixtrack.ru/core/internal/handlers.TestAuthHandler_Register_DuplicateUsername
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/auth_handler_test.go:300
testing.tRunner
	/usr/lib/go-1.22/src/testing/testing.go:1689
--- PASS: TestAuthHandler_Register_DuplicateUsername (3.72s)
=== RUN   TestAuthHandler_Register_DuplicateEmail
2025-10-16T20:36:49.699+0300	ERROR	logger/logger.go:131	Failed to create user	{"error": "UNIQUE constraint failed: users.email"}
helixtrack.ru/core/internal/logger.Error
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/logger/logger.go:131
helixtrack.ru/core/internal/handlers.(*AuthHandler).Register
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/auth_handler.go:93
helixtrack.ru/core/internal/handlers.TestAuthHandler_Register_DuplicateEmail
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/auth_handler_test.go:341
testing.tRunner
	/usr/lib/go-1.22/src/testing/testing.go:1689
--- PASS: TestAuthHandler_Register_DuplicateEmail (3.66s)
=== RUN   TestAuthHandler_Login_Success
--- PASS: TestAuthHandler_Login_Success (3.69s)
=== RUN   TestAuthHandler_Login_MissingUsername
2025-10-16T20:36:55.854+0300	ERROR	logger/logger.go:131	Failed to bind login request	{"error": "Key: 'UserLoginRequest.Username' Error:Field validation for 'Username' failed on the 'required' tag"}
helixtrack.ru/core/internal/logger.Error
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/logger/logger.go:131
helixtrack.ru/core/internal/handlers.(*AuthHandler).Login
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/auth_handler.go:119
helixtrack.ru/core/internal/handlers.TestAuthHandler_Login_MissingUsername
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/auth_handler_test.go:416
testing.tRunner
	/usr/lib/go-1.22/src/testing/testing.go:1689
--- PASS: TestAuthHandler_Login_MissingUsername (2.46s)
=== RUN   TestAuthHandler_Login_MissingPassword
2025-10-16T20:36:58.306+0300	ERROR	logger/logger.go:131	Failed to bind login request	{"error": "Key: 'UserLoginRequest.Password' Error:Field validation for 'Password' failed on the 'required' tag"}
helixtrack.ru/core/internal/logger.Error
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/logger/logger.go:131
helixtrack.ru/core/internal/handlers.(*AuthHandler).Login
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/auth_handler.go:119
helixtrack.ru/core/internal/handlers.TestAuthHandler_Login_MissingPassword
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/auth_handler_test.go:444
testing.tRunner
	/usr/lib/go-1.22/src/testing/testing.go:1689
--- PASS: TestAuthHandler_Login_MissingPassword (2.45s)
=== RUN   TestAuthHandler_Login_UserNotFound
2025-10-16T20:37:00.786+0300	ERROR	logger/logger.go:131	User not found	{"error": "sql: no rows in result set", "username": "nonexistentuser"}
helixtrack.ru/core/internal/logger.Error
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/logger/logger.go:131
helixtrack.ru/core/internal/handlers.(*AuthHandler).Login
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/auth_handler.go:150
helixtrack.ru/core/internal/handlers.TestAuthHandler_Login_UserNotFound
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/auth_handler_test.go:473
testing.tRunner
	/usr/lib/go-1.22/src/testing/testing.go:1689
--- PASS: TestAuthHandler_Login_UserNotFound (2.48s)
=== RUN   TestAuthHandler_Login_IncorrectPassword
2025-10-16T20:37:04.454+0300	ERROR	logger/logger.go:131	Invalid password	{"username": "testuser"}
helixtrack.ru/core/internal/logger.Error
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/logger/logger.go:131
helixtrack.ru/core/internal/handlers.(*AuthHandler).Login
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/auth_handler.go:165
helixtrack.ru/core/internal/handlers.TestAuthHandler_Login_IncorrectPassword
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/auth_handler_test.go:512
testing.tRunner
	/usr/lib/go-1.22/src/testing/testing.go:1689
--- PASS: TestAuthHandler_Login_IncorrectPassword (3.67s)
=== RUN   TestAuthHandler_Login_DeletedUser
2025-10-16T20:37:07.511+0300	ERROR	logger/logger.go:131	User not found	{"error": "sql: no rows in result set", "username": "deleteduser"}
helixtrack.ru/core/internal/logger.Error
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/logger/logger.go:131
helixtrack.ru/core/internal/handlers.(*AuthHandler).Login
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/auth_handler.go:150
helixtrack.ru/core/internal/handlers.TestAuthHandler_Login_DeletedUser
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/auth_handler_test.go:551
testing.tRunner
	/usr/lib/go-1.22/src/testing/testing.go:1689
--- PASS: TestAuthHandler_Login_DeletedUser (3.06s)
=== RUN   TestAuthHandler_Logout_Success
--- PASS: TestAuthHandler_Logout_Success (2.44s)
=== RUN   TestAuthHandler_FullAuthenticationCycle
--- PASS: TestAuthHandler_FullAuthenticationCycle (3.66s)
=== RUN   TestInitializeUserTable
--- PASS: TestInitializeUserTable (2.44s)
=== RUN   TestAuthHandler_Register_PasswordHashing
--- PASS: TestAuthHandler_Register_PasswordHashing (4.27s)
=== RUN   TestAuthHandler_Login_JWTTokenGeneration
--- PASS: TestAuthHandler_Login_JWTTokenGeneration (3.67s)
=== RUN   TestBoardConfigHandler_ConfigureColumns_Success
--- PASS: TestBoardConfigHandler_ConfigureColumns_Success (0.00s)
=== RUN   TestBoardConfigHandler_ConfigureColumns_MissingBoardID
--- PASS: TestBoardConfigHandler_ConfigureColumns_MissingBoardID (0.00s)
=== RUN   TestBoardConfigHandler_ConfigureColumns_BoardNotFound
--- PASS: TestBoardConfigHandler_ConfigureColumns_BoardNotFound (0.00s)
=== RUN   TestBoardConfigHandler_ConfigureColumns_MissingColumns
--- PASS: TestBoardConfigHandler_ConfigureColumns_MissingColumns (0.00s)
=== RUN   TestBoardConfigHandler_ConfigureColumns_Unauthorized
--- PASS: TestBoardConfigHandler_ConfigureColumns_Unauthorized (0.00s)
=== RUN   TestBoardConfigHandler_AddColumn_Success
--- PASS: TestBoardConfigHandler_AddColumn_Success (0.00s)
=== RUN   TestBoardConfigHandler_AddColumn_MissingBoardID
--- PASS: TestBoardConfigHandler_AddColumn_MissingBoardID (0.00s)
=== RUN   TestBoardConfigHandler_AddColumn_MissingTitle
--- PASS: TestBoardConfigHandler_AddColumn_MissingTitle (0.00s)
=== RUN   TestBoardConfigHandler_AddColumn_Unauthorized
--- PASS: TestBoardConfigHandler_AddColumn_Unauthorized (0.00s)
=== RUN   TestBoardConfigHandler_RemoveColumn_Success
--- PASS: TestBoardConfigHandler_RemoveColumn_Success (0.00s)
=== RUN   TestBoardConfigHandler_RemoveColumn_MissingColumnID
--- PASS: TestBoardConfigHandler_RemoveColumn_MissingColumnID (0.00s)
=== RUN   TestBoardConfigHandler_RemoveColumn_NotFound
--- PASS: TestBoardConfigHandler_RemoveColumn_NotFound (0.00s)
=== RUN   TestBoardConfigHandler_RemoveColumn_Unauthorized
--- PASS: TestBoardConfigHandler_RemoveColumn_Unauthorized (0.00s)
=== RUN   TestBoardConfigHandler_ModifyColumn_Success
--- PASS: TestBoardConfigHandler_ModifyColumn_Success (0.00s)
=== RUN   TestBoardConfigHandler_ModifyColumn_OnlyTitle
--- PASS: TestBoardConfigHandler_ModifyColumn_OnlyTitle (0.00s)
=== RUN   TestBoardConfigHandler_ModifyColumn_MissingColumnID
--- PASS: TestBoardConfigHandler_ModifyColumn_MissingColumnID (0.00s)
=== RUN   TestBoardConfigHandler_ModifyColumn_NotFound
--- PASS: TestBoardConfigHandler_ModifyColumn_NotFound (0.00s)
=== RUN   TestBoardConfigHandler_ModifyColumn_NoFieldsToUpdate
--- PASS: TestBoardConfigHandler_ModifyColumn_NoFieldsToUpdate (0.00s)
=== RUN   TestBoardConfigHandler_ModifyColumn_Unauthorized
--- PASS: TestBoardConfigHandler_ModifyColumn_Unauthorized (0.00s)
=== RUN   TestBoardConfigHandler_ListColumns_Success
--- PASS: TestBoardConfigHandler_ListColumns_Success (0.00s)
=== RUN   TestBoardConfigHandler_ListColumns_Empty
--- PASS: TestBoardConfigHandler_ListColumns_Empty (0.00s)
=== RUN   TestBoardConfigHandler_ListColumns_MissingBoardID
--- PASS: TestBoardConfigHandler_ListColumns_MissingBoardID (0.00s)
=== RUN   TestBoardConfigHandler_ListColumns_Unauthorized
--- PASS: TestBoardConfigHandler_ListColumns_Unauthorized (0.00s)
=== RUN   TestBoardConfigHandler_AddSwimlane_Success
--- PASS: TestBoardConfigHandler_AddSwimlane_Success (0.00s)
=== RUN   TestBoardConfigHandler_AddSwimlane_MissingBoardID
--- PASS: TestBoardConfigHandler_AddSwimlane_MissingBoardID (0.00s)
=== RUN   TestBoardConfigHandler_AddSwimlane_MissingTitle
--- PASS: TestBoardConfigHandler_AddSwimlane_MissingTitle (0.00s)
=== RUN   TestBoardConfigHandler_AddSwimlane_Unauthorized
--- PASS: TestBoardConfigHandler_AddSwimlane_Unauthorized (0.00s)
=== RUN   TestBoardConfigHandler_RemoveSwimlane_Success
--- PASS: TestBoardConfigHandler_RemoveSwimlane_Success (0.00s)
=== RUN   TestBoardConfigHandler_RemoveSwimlane_MissingSwimlaneID
--- PASS: TestBoardConfigHandler_RemoveSwimlane_MissingSwimlaneID (0.00s)
=== RUN   TestBoardConfigHandler_RemoveSwimlane_NotFound
--- PASS: TestBoardConfigHandler_RemoveSwimlane_NotFound (0.00s)
=== RUN   TestBoardConfigHandler_RemoveSwimlane_Unauthorized
--- PASS: TestBoardConfigHandler_RemoveSwimlane_Unauthorized (0.00s)
=== RUN   TestBoardConfigHandler_ListSwimlanes_Success
--- PASS: TestBoardConfigHandler_ListSwimlanes_Success (0.00s)
=== RUN   TestBoardConfigHandler_ListSwimlanes_Empty
--- PASS: TestBoardConfigHandler_ListSwimlanes_Empty (0.00s)
=== RUN   TestBoardConfigHandler_ListSwimlanes_MissingBoardID
--- PASS: TestBoardConfigHandler_ListSwimlanes_MissingBoardID (0.00s)
=== RUN   TestBoardConfigHandler_ListSwimlanes_Unauthorized
--- PASS: TestBoardConfigHandler_ListSwimlanes_Unauthorized (0.00s)
=== RUN   TestBoardConfigHandler_AddQuickFilter_Success
--- PASS: TestBoardConfigHandler_AddQuickFilter_Success (0.00s)
=== RUN   TestBoardConfigHandler_AddQuickFilter_MissingBoardID
--- PASS: TestBoardConfigHandler_AddQuickFilter_MissingBoardID (0.00s)
=== RUN   TestBoardConfigHandler_AddQuickFilter_MissingTitle
--- PASS: TestBoardConfigHandler_AddQuickFilter_MissingTitle (0.00s)
=== RUN   TestBoardConfigHandler_AddQuickFilter_Unauthorized
--- PASS: TestBoardConfigHandler_AddQuickFilter_Unauthorized (0.00s)
=== RUN   TestBoardConfigHandler_RemoveQuickFilter_Success
--- PASS: TestBoardConfigHandler_RemoveQuickFilter_Success (0.00s)
=== RUN   TestBoardConfigHandler_RemoveQuickFilter_MissingFilterID
--- PASS: TestBoardConfigHandler_RemoveQuickFilter_MissingFilterID (0.00s)
=== RUN   TestBoardConfigHandler_RemoveQuickFilter_NotFound
--- PASS: TestBoardConfigHandler_RemoveQuickFilter_NotFound (0.00s)
=== RUN   TestBoardConfigHandler_RemoveQuickFilter_Unauthorized
--- PASS: TestBoardConfigHandler_RemoveQuickFilter_Unauthorized (0.00s)
=== RUN   TestBoardConfigHandler_ListQuickFilters_Success
--- PASS: TestBoardConfigHandler_ListQuickFilters_Success (0.00s)
=== RUN   TestBoardConfigHandler_ListQuickFilters_Empty
--- PASS: TestBoardConfigHandler_ListQuickFilters_Empty (0.00s)
=== RUN   TestBoardConfigHandler_ListQuickFilters_MissingBoardID
--- PASS: TestBoardConfigHandler_ListQuickFilters_MissingBoardID (0.00s)
=== RUN   TestBoardConfigHandler_ListQuickFilters_Unauthorized
--- PASS: TestBoardConfigHandler_ListQuickFilters_Unauthorized (0.00s)
=== RUN   TestBoardConfigHandler_SetType_Success_Scrum
--- PASS: TestBoardConfigHandler_SetType_Success_Scrum (0.00s)
=== RUN   TestBoardConfigHandler_SetType_Success_Kanban
--- PASS: TestBoardConfigHandler_SetType_Success_Kanban (0.00s)
=== RUN   TestBoardConfigHandler_SetType_MissingBoardID
--- PASS: TestBoardConfigHandler_SetType_MissingBoardID (0.00s)
=== RUN   TestBoardConfigHandler_SetType_InvalidType
--- PASS: TestBoardConfigHandler_SetType_InvalidType (0.00s)
=== RUN   TestBoardConfigHandler_SetType_BoardNotFound
--- PASS: TestBoardConfigHandler_SetType_BoardNotFound (0.00s)
=== RUN   TestBoardConfigHandler_SetType_Unauthorized
--- PASS: TestBoardConfigHandler_SetType_Unauthorized (0.00s)
=== RUN   TestBoardHandler_Create_Success
2025-10-16T20:37:24.015+0300	ERROR	logger/logger.go:131	Failed to create board	{"error": "table board has no column named version"}
helixtrack.ru/core/internal/logger.Error
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/logger/logger.go:131
helixtrack.ru/core/internal/handlers.(*Handler).handleBoardCreate
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/board_handler.go:98
helixtrack.ru/core/internal/handlers.(*Handler).DoAction
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/handler.go:208
helixtrack.ru/core/internal/handlers.TestBoardHandler_Create_Success
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/board_handler_test.go:93
testing.tRunner
	/usr/lib/go-1.22/src/testing/testing.go:1689
    board_handler_test.go:95: 
        	Error Trace:	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/board_handler_test.go:95
        	Error:      	Not equal: 
        	            	expected: 201
        	            	actual  : 500
        	Test:       	TestBoardHandler_Create_Success
    board_handler_test.go:100: 
        	Error Trace:	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/board_handler_test.go:100
        	Error:      	Not equal: 
        	            	expected: -1
        	            	actual  : 2000
        	Test:       	TestBoardHandler_Create_Success
    board_handler_test.go:103: 
        	Error Trace:	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/board_handler_test.go:103
        	Error:      	Should be true
        	Test:       	TestBoardHandler_Create_Success
--- FAIL: TestBoardHandler_Create_Success (0.00s)
=== RUN   TestBoardHandler_Create_MinimalFields
2025-10-16T20:37:24.016+0300	ERROR	logger/logger.go:131	Failed to create board	{"error": "table board has no column named version"}
helixtrack.ru/core/internal/logger.Error
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/logger/logger.go:131
helixtrack.ru/core/internal/handlers.(*Handler).handleBoardCreate
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/board_handler.go:98
helixtrack.ru/core/internal/handlers.(*Handler).DoAction
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/handler.go:208
helixtrack.ru/core/internal/handlers.TestBoardHandler_Create_MinimalFields
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/board_handler_test.go:129
testing.tRunner
	/usr/lib/go-1.22/src/testing/testing.go:1689
    board_handler_test.go:131: 
        	Error Trace:	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/board_handler_test.go:131
        	Error:      	Not equal: 
        	            	expected: 201
        	            	actual  : 500
        	Test:       	TestBoardHandler_Create_MinimalFields
--- FAIL: TestBoardHandler_Create_MinimalFields (0.00s)
=== RUN   TestBoardHandler_Create_MissingTitle
--- PASS: TestBoardHandler_Create_MissingTitle (0.00s)
=== RUN   TestBoardHandler_Create_Unauthorized
--- PASS: TestBoardHandler_Create_Unauthorized (0.00s)
=== RUN   TestBoardHandler_Read_Success
2025-10-16T20:37:24.017+0300	ERROR	logger/logger.go:131	Failed to create board	{"error": "table board has no column named version"}
helixtrack.ru/core/internal/logger.Error
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/logger/logger.go:131
helixtrack.ru/core/internal/handlers.(*Handler).handleBoardCreate
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/board_handler.go:98
helixtrack.ru/core/internal/handlers.(*Handler).DoAction
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/handler.go:208
helixtrack.ru/core/internal/handlers.TestBoardHandler_Read_Success
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/board_handler_test.go:212
testing.tRunner
	/usr/lib/go-1.22/src/testing/testing.go:1689
--- FAIL: TestBoardHandler_Read_Success (0.00s)
panic: interface conversion: interface {} is nil, not map[string]interface {} [recovered]
	panic: interface conversion: interface {} is nil, not map[string]interface {}

goroutine 341 [running]:
testing.tRunner.func1.2({0x120d320, 0xc0004f4c60})
	/usr/lib/go-1.22/src/testing/testing.go:1631 +0x3f7
testing.tRunner.func1()
	/usr/lib/go-1.22/src/testing/testing.go:1634 +0x6b6
panic({0x120d320?, 0xc0004f4c60?})
	/usr/lib/go-1.22/src/runtime/panic.go:770 +0x132
helixtrack.ru/core/internal/handlers.TestBoardHandler_Read_Success(0xc0007acd00)
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/handlers/board_handler_test.go:216 +0x1105
testing.tRunner(0xc0007acd00, 0x1320d68)
	/usr/lib/go-1.22/src/testing/testing.go:1689 +0x21f
created by testing.(*T).Run in goroutine 1
	/usr/lib/go-1.22/src/testing/testing.go:1742 +0x826
FAIL	helixtrack.ru/core/internal/handlers	59.841s
=== RUN   TestInitialize
=== RUN   TestInitialize/Valid_configuration
2025-10-16T20:36:24.202+0300	INFO	logger/logger.go:121	Test log message
=== RUN   TestInitialize/Debug_level
2025-10-16T20:36:24.203+0300	INFO	logger/logger.go:121	Test log message
=== RUN   TestInitialize/Warn_level
2025-10-16T20:36:24.203+0300	WARN	logger/logger.go:126	Test log message
=== RUN   TestInitialize/Error_level
2025-10-16T20:36:24.203+0300	ERROR	logger/logger.go:131	Test log message
helixtrack.ru/core/internal/logger.Error
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/logger/logger.go:131
helixtrack.ru/core/internal/logger.TestInitialize.func1
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/logger/logger_test.go:107
testing.tRunner
	/usr/lib/go-1.22/src/testing/testing.go:1689
=== RUN   TestInitialize/Invalid_level
=== RUN   TestInitialize/Empty_basename
2025-10-16T20:36:24.204+0300	INFO	logger/logger.go:121	Test log message
--- PASS: TestInitialize (0.00s)
    --- PASS: TestInitialize/Valid_configuration (0.00s)
    --- PASS: TestInitialize/Debug_level (0.00s)
    --- PASS: TestInitialize/Warn_level (0.00s)
    --- PASS: TestInitialize/Error_level (0.00s)
    --- PASS: TestInitialize/Invalid_level (0.00s)
    --- PASS: TestInitialize/Empty_basename (0.00s)
=== RUN   TestGet
--- PASS: TestGet (0.00s)
=== RUN   TestGetSugared
--- PASS: TestGetSugared (0.00s)
=== RUN   TestLoggingFunctions
=== RUN   TestLoggingFunctions/Debug
2025-10-16T20:36:24.208+0300	DEBUG	logger/logger.go:116	debug message	{"key": "value"}
=== RUN   TestLoggingFunctions/Info
2025-10-16T20:36:24.209+0300	INFO	logger/logger.go:121	info message	{"key": "value"}
=== RUN   TestLoggingFunctions/Warn
2025-10-16T20:36:24.209+0300	WARN	logger/logger.go:126	warn message	{"key": "value"}
=== RUN   TestLoggingFunctions/Error
2025-10-16T20:36:24.209+0300	ERROR	logger/logger.go:131	error message	{"key": "value"}
helixtrack.ru/core/internal/logger.Error
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/logger/logger.go:131
helixtrack.ru/core/internal/logger.TestLoggingFunctions.func4.1
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/logger/logger_test.go:181
github.com/stretchr/testify/assert.didPanic
	/home/milosvasic/go/pkg/mod/github.com/stretchr/testify@v1.9.0/assert/assertions.go:1201
github.com/stretchr/testify/assert.NotPanics
	/home/milosvasic/go/pkg/mod/github.com/stretchr/testify@v1.9.0/assert/assertions.go:1272
helixtrack.ru/core/internal/logger.TestLoggingFunctions.func4
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/logger/logger_test.go:180
testing.tRunner
	/usr/lib/go-1.22/src/testing/testing.go:1689
=== RUN   TestLoggingFunctions/Debugf
2025-10-16T20:36:24.209+0300	DEBUG	logger/logger.go:141	debug test 123
=== RUN   TestLoggingFunctions/Infof
2025-10-16T20:36:24.209+0300	INFO	logger/logger.go:146	info test 123
=== RUN   TestLoggingFunctions/Warnf
2025-10-16T20:36:24.210+0300	WARN	logger/logger.go:151	warn test 123
=== RUN   TestLoggingFunctions/Errorf
2025-10-16T20:36:24.210+0300	ERROR	logger/logger.go:156	error test 123
helixtrack.ru/core/internal/logger.Errorf
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/logger/logger.go:156
helixtrack.ru/core/internal/logger.TestLoggingFunctions.func8.1
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/logger/logger_test.go:205
github.com/stretchr/testify/assert.didPanic
	/home/milosvasic/go/pkg/mod/github.com/stretchr/testify@v1.9.0/assert/assertions.go:1201
github.com/stretchr/testify/assert.NotPanics
	/home/milosvasic/go/pkg/mod/github.com/stretchr/testify@v1.9.0/assert/assertions.go:1272
helixtrack.ru/core/internal/logger.TestLoggingFunctions.func8
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/logger/logger_test.go:204
testing.tRunner
	/usr/lib/go-1.22/src/testing/testing.go:1689
--- PASS: TestLoggingFunctions (0.00s)
    --- PASS: TestLoggingFunctions/Debug (0.00s)
    --- PASS: TestLoggingFunctions/Info (0.00s)
    --- PASS: TestLoggingFunctions/Warn (0.00s)
    --- PASS: TestLoggingFunctions/Error (0.00s)
    --- PASS: TestLoggingFunctions/Debugf (0.00s)
    --- PASS: TestLoggingFunctions/Infof (0.00s)
    --- PASS: TestLoggingFunctions/Warnf (0.00s)
    --- PASS: TestLoggingFunctions/Errorf (0.00s)
=== RUN   TestSync
2025-10-16T20:36:24.210+0300	INFO	logger/logger.go:121	test message
--- PASS: TestSync (0.00s)
=== RUN   TestSync_Uninitialized
--- PASS: TestSync_Uninitialized (0.00s)
=== RUN   TestInitialize_CreatesDirectory
2025-10-16T20:36:24.211+0300	INFO	logger/logger.go:121	test message
--- PASS: TestInitialize_CreatesDirectory (0.00s)
PASS
coverage: 90.7% of statements
ok  	helixtrack.ru/core/internal/logger	1.033s	coverage: 90.7% of statements
=== RUN   TestNewMetrics
--- PASS: TestNewMetrics (0.00s)
=== RUN   TestMetrics_RecordRequest
--- PASS: TestMetrics_RecordRequest (0.00s)
=== RUN   TestMetrics_RecordRequest_StatusCodes
--- PASS: TestMetrics_RecordRequest_StatusCodes (0.00s)
=== RUN   TestMetrics_Timing
--- PASS: TestMetrics_Timing (0.00s)
=== RUN   TestMetrics_EndpointMetrics
--- PASS: TestMetrics_EndpointMetrics (0.00s)
=== RUN   TestMetrics_RequestsPerSecond
--- PASS: TestMetrics_RequestsPerSecond (0.10s)
=== RUN   TestMetrics_Reset
--- PASS: TestMetrics_Reset (0.00s)
=== RUN   TestMetrics_Uptime
--- PASS: TestMetrics_Uptime (0.10s)
=== RUN   TestMetrics_LastRequestTime
--- PASS: TestMetrics_LastRequestTime (0.00s)
=== RUN   TestMetricsMiddleware
--- PASS: TestMetricsMiddleware (0.01s)
=== RUN   TestMetricsMiddleware_MultipleRequests
--- PASS: TestMetricsMiddleware_MultipleRequests (0.00s)
=== RUN   TestGetGlobalMetrics
--- PASS: TestGetGlobalMetrics (0.00s)
=== RUN   TestHealthCheck_Check
--- PASS: TestHealthCheck_Check (0.00s)
=== RUN   TestHealthCheck_CheckWithMetrics
--- PASS: TestHealthCheck_CheckWithMetrics (0.00s)
=== RUN   TestHealthCheck_UnhealthyDatabase
--- PASS: TestHealthCheck_UnhealthyDatabase (0.00s)
=== RUN   TestMetrics_ConcurrentAccess
--- PASS: TestMetrics_ConcurrentAccess (0.00s)
PASS
coverage: 100.0% of statements
ok  	helixtrack.ru/core/internal/metrics	1.258s	coverage: 100.0% of statements
=== RUN   TestJWTMiddleware_Validate
=== RUN   TestJWTMiddleware_Validate/Missing_Authorization_header
=== RUN   TestJWTMiddleware_Validate/Invalid_Authorization_header_format
=== RUN   TestJWTMiddleware_Validate/Valid_token_with_auth_service
=== RUN   TestJWTMiddleware_Validate/Invalid_token_with_auth_service
=== RUN   TestJWTMiddleware_Validate/Valid_local_token
=== RUN   TestJWTMiddleware_Validate/Invalid_local_token_-_wrong_secret
--- PASS: TestJWTMiddleware_Validate (0.00s)
    --- PASS: TestJWTMiddleware_Validate/Missing_Authorization_header (0.00s)
    --- PASS: TestJWTMiddleware_Validate/Invalid_Authorization_header_format (0.00s)
    --- PASS: TestJWTMiddleware_Validate/Valid_token_with_auth_service (0.00s)
    --- PASS: TestJWTMiddleware_Validate/Invalid_token_with_auth_service (0.00s)
    --- PASS: TestJWTMiddleware_Validate/Valid_local_token (0.00s)
    --- PASS: TestJWTMiddleware_Validate/Invalid_local_token_-_wrong_secret (0.00s)
=== RUN   TestGetClaims
=== RUN   TestGetClaims/Claims_exist_in_context
=== RUN   TestGetClaims/Claims_don't_exist_in_context
=== RUN   TestGetClaims/Claims_with_wrong_type_in_context
--- PASS: TestGetClaims (0.00s)
    --- PASS: TestGetClaims/Claims_exist_in_context (0.00s)
    --- PASS: TestGetClaims/Claims_don't_exist_in_context (0.00s)
    --- PASS: TestGetClaims/Claims_with_wrong_type_in_context (0.00s)
=== RUN   TestGetUsername
=== RUN   TestGetUsername/Username_exists_in_context
=== RUN   TestGetUsername/Username_doesn't_exist_in_context
=== RUN   TestGetUsername/Username_with_wrong_type_in_context
--- PASS: TestGetUsername (0.00s)
    --- PASS: TestGetUsername/Username_exists_in_context (0.00s)
    --- PASS: TestGetUsername/Username_doesn't_exist_in_context (0.00s)
    --- PASS: TestGetUsername/Username_with_wrong_type_in_context (0.00s)
=== RUN   TestJWTMiddleware_validateTokenLocally_ExpiredToken
--- PASS: TestJWTMiddleware_validateTokenLocally_ExpiredToken (0.00s)
=== RUN   TestNewJWTMiddleware
--- PASS: TestNewJWTMiddleware (0.00s)
=== RUN   TestCompressionMiddleware
=== RUN   TestCompressionMiddleware/With_gzip_support
=== RUN   TestCompressionMiddleware/Without_gzip_support
=== RUN   TestCompressionMiddleware/Empty_accept-encoding
--- PASS: TestCompressionMiddleware (0.00s)
    --- PASS: TestCompressionMiddleware/With_gzip_support (0.00s)
    --- PASS: TestCompressionMiddleware/Without_gzip_support (0.00s)
    --- PASS: TestCompressionMiddleware/Empty_accept-encoding (0.00s)
=== RUN   TestCompressionMiddleware_AlreadyCompressed
--- PASS: TestCompressionMiddleware_AlreadyCompressed (0.00s)
=== RUN   TestRateLimitMiddleware
--- PASS: TestRateLimitMiddleware (0.00s)
=== RUN   TestRateLimitMiddleware_TokenRefill
--- PASS: TestRateLimitMiddleware_TokenRefill (0.20s)
=== RUN   TestCircuitBreakerMiddleware
--- PASS: TestCircuitBreakerMiddleware (0.00s)
=== RUN   TestCircuitBreaker_HalfOpenState
--- PASS: TestCircuitBreaker_HalfOpenState (0.15s)
=== RUN   TestTimeoutMiddleware
==================
WARNING: DATA RACE
Write at 0x00c0004d9268 by goroutine 52:
  github.com/gin-gonic/gin.(*Context).Abort()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:200 +0x2f
  helixtrack.ru/core/internal/middleware.TestTimeoutMiddleware.TimeoutMiddleware.func3()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/middleware/performance.go:425 +0x364
  github.com/gin-gonic/gin.(*Context).Next()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185 +0xe8a
  github.com/gin-gonic/gin.(*Engine).handleHTTPRequest()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633 +0x7e8
  github.com/gin-gonic/gin.(*Engine).ServeHTTP()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589 +0x418
  helixtrack.ru/core/internal/middleware.TestTimeoutMiddleware()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/middleware/performance_test.go:217 +0x4cb
  testing.tRunner()
      /usr/lib/go-1.22/src/testing/testing.go:1689 +0x21e
  testing.(*T).Run.gowrap1()
      /usr/lib/go-1.22/src/testing/testing.go:1742 +0x44

Previous write at 0x00c0004d9268 by goroutine 54:
  github.com/gin-gonic/gin.(*Context).Next()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:183 +0x53
  helixtrack.ru/core/internal/middleware.TestTimeoutMiddleware.TimeoutMiddleware.func3.1()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/middleware/performance.go:412 +0x44

Goroutine 52 (running) created at:
  testing.(*T).Run()
      /usr/lib/go-1.22/src/testing/testing.go:1742 +0x825
  testing.runTests.func1()
      /usr/lib/go-1.22/src/testing/testing.go:2161 +0x85
  testing.tRunner()
      /usr/lib/go-1.22/src/testing/testing.go:1689 +0x21e
  testing.runTests()
      /usr/lib/go-1.22/src/testing/testing.go:2159 +0x8be
  testing.(*M).Run()
      /usr/lib/go-1.22/src/testing/testing.go:2027 +0xf17
  main.main()
      _testmain.go:171 +0x2e4

Goroutine 54 (running) created at:
  helixtrack.ru/core/internal/middleware.TestTimeoutMiddleware.TimeoutMiddleware.func3()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/middleware/performance.go:411 +0x20a
  github.com/gin-gonic/gin.(*Context).Next()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185 +0xe8a
  github.com/gin-gonic/gin.(*Engine).handleHTTPRequest()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633 +0x7e8
  github.com/gin-gonic/gin.(*Engine).ServeHTTP()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589 +0x418
  helixtrack.ru/core/internal/middleware.TestTimeoutMiddleware()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/middleware/performance_test.go:217 +0x4cb
  testing.tRunner()
      /usr/lib/go-1.22/src/testing/testing.go:1689 +0x21e
  testing.(*T).Run.gowrap1()
      /usr/lib/go-1.22/src/testing/testing.go:1742 +0x44
==================
    testing.go:1398: race detected during execution of test
--- FAIL: TestTimeoutMiddleware (0.10s)
=== RUN   TestCORSMiddleware
--- PASS: TestCORSMiddleware (0.00s)
=== RUN   TestCORSMiddleware_PreflightRequest
--- PASS: TestCORSMiddleware_PreflightRequest (0.00s)
=== RUN   TestCORSMiddleware_Wildcard
--- PASS: TestCORSMiddleware_Wildcard (0.00s)
=== RUN   TestTokenBucket_Take
--- PASS: TestTokenBucket_Take (0.00s)
=== RUN   TestTokenBucket_Refill
--- PASS: TestTokenBucket_Refill (0.00s)
=== RUN   TestRateLimiter_Cleanup
==================
WARNING: DATA RACE
Read at 0x00c0004d9218 by goroutine 54:
  github.com/gin-gonic/gin.(*responseWriter).WriteHeader()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/response_writer.go:65 +0x4b
  github.com/gin-gonic/gin.(*Context).Status()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:886 +0x52
  helixtrack.ru/core/internal/middleware.TestTimeoutMiddleware.func2()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/middleware/performance_test.go:205 +0x32
  github.com/gin-gonic/gin.(*Context).Next()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185 +0x92
  helixtrack.ru/core/internal/middleware.TestTimeoutMiddleware.TimeoutMiddleware.func3.1()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/middleware/performance.go:412 +0x44

Previous write at 0x00c0004d9218 by goroutine 52:
  github.com/gin-gonic/gin.(*responseWriter).WriteHeader()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/response_writer.go:70 +0x18c
  github.com/gin-gonic/gin.(*Context).Status()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:886 +0x6e
  github.com/gin-gonic/gin.(*Context).Render()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:952 +0x4e
  github.com/gin-gonic/gin.(*Context).JSON()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:1005 +0x6f
  helixtrack.ru/core/internal/middleware.TestTimeoutMiddleware.TimeoutMiddleware.func3()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/middleware/performance.go:422 +0x353
  github.com/gin-gonic/gin.(*Context).Next()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185 +0xe8a
  github.com/gin-gonic/gin.(*Engine).handleHTTPRequest()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633 +0x7e8
  github.com/gin-gonic/gin.(*Engine).ServeHTTP()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589 +0x418
  helixtrack.ru/core/internal/middleware.TestTimeoutMiddleware()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/middleware/performance_test.go:217 +0x4cb
  testing.tRunner()
      /usr/lib/go-1.22/src/testing/testing.go:1689 +0x21e
  testing.(*T).Run.gowrap1()
      /usr/lib/go-1.22/src/testing/testing.go:1742 +0x44

Goroutine 54 (running) created at:
  helixtrack.ru/core/internal/middleware.TestTimeoutMiddleware.TimeoutMiddleware.func3()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/middleware/performance.go:411 +0x20a
  github.com/gin-gonic/gin.(*Context).Next()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185 +0xe8a
  github.com/gin-gonic/gin.(*Engine).handleHTTPRequest()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633 +0x7e8
  github.com/gin-gonic/gin.(*Engine).ServeHTTP()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589 +0x418
  helixtrack.ru/core/internal/middleware.TestTimeoutMiddleware()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/middleware/performance_test.go:217 +0x4cb
  testing.tRunner()
      /usr/lib/go-1.22/src/testing/testing.go:1689 +0x21e
  testing.(*T).Run.gowrap1()
      /usr/lib/go-1.22/src/testing/testing.go:1742 +0x44

Goroutine 52 (finished) created at:
  testing.(*T).Run()
      /usr/lib/go-1.22/src/testing/testing.go:1742 +0x825
  testing.runTests.func1()
      /usr/lib/go-1.22/src/testing/testing.go:2161 +0x85
  testing.tRunner()
      /usr/lib/go-1.22/src/testing/testing.go:1689 +0x21e
  testing.runTests()
      /usr/lib/go-1.22/src/testing/testing.go:2159 +0x8be
  testing.(*M).Run()
      /usr/lib/go-1.22/src/testing/testing.go:2027 +0xf17
  main.main()
      _testmain.go:171 +0x2e4
==================
==================
WARNING: DATA RACE
Read at 0x00c0004d9210 by goroutine 54:
  github.com/gin-gonic/gin.(*responseWriter).Written()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/response_writer.go:104 +0x75
  github.com/gin-gonic/gin.(*responseWriter).WriteHeader()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/response_writer.go:66 +0x80
  github.com/gin-gonic/gin.(*Context).Status()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:886 +0x52
  helixtrack.ru/core/internal/middleware.TestTimeoutMiddleware.func2()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/middleware/performance_test.go:205 +0x32
  github.com/gin-gonic/gin.(*Context).Next()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185 +0x92
  helixtrack.ru/core/internal/middleware.TestTimeoutMiddleware.TimeoutMiddleware.func3.1()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/middleware/performance.go:412 +0x44

Previous write at 0x00c0004d9210 by goroutine 52:
  github.com/gin-gonic/gin.(*responseWriter).WriteHeaderNow()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/response_writer.go:76 +0x5e
  github.com/gin-gonic/gin.(*responseWriter).Write()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/response_writer.go:82 +0x40
  github.com/gin-gonic/gin/render.WriteJSON()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/render/json.go:72 +0xc3
  github.com/gin-gonic/gin/render.JSON.Render()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/render/json.go:57 +0x67
  github.com/gin-gonic/gin/render.(*JSON).Render()
      <autogenerated>:1 +0x1f
  github.com/gin-gonic/gin.(*Context).Render()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:960 +0x10d
  github.com/gin-gonic/gin.(*Context).JSON()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:1005 +0x6f
  helixtrack.ru/core/internal/middleware.TestTimeoutMiddleware.TimeoutMiddleware.func3()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/middleware/performance.go:422 +0x353
  github.com/gin-gonic/gin.(*Context).Next()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185 +0xe8a
  github.com/gin-gonic/gin.(*Engine).handleHTTPRequest()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633 +0x7e8
  github.com/gin-gonic/gin.(*Engine).ServeHTTP()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589 +0x418
  helixtrack.ru/core/internal/middleware.TestTimeoutMiddleware()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/middleware/performance_test.go:217 +0x4cb
  testing.tRunner()
      /usr/lib/go-1.22/src/testing/testing.go:1689 +0x21e
  testing.(*T).Run.gowrap1()
      /usr/lib/go-1.22/src/testing/testing.go:1742 +0x44

Goroutine 54 (running) created at:
  helixtrack.ru/core/internal/middleware.TestTimeoutMiddleware.TimeoutMiddleware.func3()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/middleware/performance.go:411 +0x20a
  github.com/gin-gonic/gin.(*Context).Next()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185 +0xe8a
  github.com/gin-gonic/gin.(*Engine).handleHTTPRequest()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633 +0x7e8
  github.com/gin-gonic/gin.(*Engine).ServeHTTP()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589 +0x418
  helixtrack.ru/core/internal/middleware.TestTimeoutMiddleware()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/middleware/performance_test.go:217 +0x4cb
  testing.tRunner()
      /usr/lib/go-1.22/src/testing/testing.go:1689 +0x21e
  testing.(*T).Run.gowrap1()
      /usr/lib/go-1.22/src/testing/testing.go:1742 +0x44

Goroutine 52 (finished) created at:
  testing.(*T).Run()
      /usr/lib/go-1.22/src/testing/testing.go:1742 +0x825
  testing.runTests.func1()
      /usr/lib/go-1.22/src/testing/testing.go:2161 +0x85
  testing.tRunner()
      /usr/lib/go-1.22/src/testing/testing.go:1689 +0x21e
  testing.runTests()
      /usr/lib/go-1.22/src/testing/testing.go:2159 +0x8be
  testing.(*M).Run()
      /usr/lib/go-1.22/src/testing/testing.go:2027 +0xf17
  main.main()
      _testmain.go:171 +0x2e4
==================
==================
WARNING: DATA RACE
Read at 0x00c0004d9268 by goroutine 54:
  github.com/gin-gonic/gin.(*Context).Next()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:186 +0x9c
  helixtrack.ru/core/internal/middleware.TestTimeoutMiddleware.TimeoutMiddleware.func3.1()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/middleware/performance.go:412 +0x44

Previous write at 0x00c0004d9268 by goroutine 52:
  github.com/gin-gonic/gin.(*Context).Next()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:186 +0xeb4
  github.com/gin-gonic/gin.(*Engine).handleHTTPRequest()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633 +0x7e8
  github.com/gin-gonic/gin.(*Engine).ServeHTTP()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589 +0x418
  helixtrack.ru/core/internal/middleware.TestTimeoutMiddleware()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/middleware/performance_test.go:217 +0x4cb
  testing.tRunner()
      /usr/lib/go-1.22/src/testing/testing.go:1689 +0x21e
  testing.(*T).Run.gowrap1()
      /usr/lib/go-1.22/src/testing/testing.go:1742 +0x44

Goroutine 54 (running) created at:
  helixtrack.ru/core/internal/middleware.TestTimeoutMiddleware.TimeoutMiddleware.func3()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/middleware/performance.go:411 +0x20a
  github.com/gin-gonic/gin.(*Context).Next()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185 +0xe8a
  github.com/gin-gonic/gin.(*Engine).handleHTTPRequest()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633 +0x7e8
  github.com/gin-gonic/gin.(*Engine).ServeHTTP()
      /home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589 +0x418
  helixtrack.ru/core/internal/middleware.TestTimeoutMiddleware()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/middleware/performance_test.go:217 +0x4cb
  testing.tRunner()
      /usr/lib/go-1.22/src/testing/testing.go:1689 +0x21e
  testing.(*T).Run.gowrap1()
      /usr/lib/go-1.22/src/testing/testing.go:1742 +0x44

Goroutine 52 (finished) created at:
  testing.(*T).Run()
      /usr/lib/go-1.22/src/testing/testing.go:1742 +0x825
  testing.runTests.func1()
      /usr/lib/go-1.22/src/testing/testing.go:2161 +0x85
  testing.tRunner()
      /usr/lib/go-1.22/src/testing/testing.go:1689 +0x21e
  testing.runTests()
      /usr/lib/go-1.22/src/testing/testing.go:2159 +0x8be
  testing.(*M).Run()
      /usr/lib/go-1.22/src/testing/testing.go:2027 +0xf17
  main.main()
      _testmain.go:171 +0x2e4
==================
    testing.go:1398: race detected during execution of test
--- FAIL: TestRateLimiter_Cleanup (0.10s)
=== RUN   TestGzipResponseWriter
--- PASS: TestGzipResponseWriter (0.00s)
=== RUN   TestDefaultConfigs
--- PASS: TestDefaultConfigs (0.00s)
=== RUN   TestPermissionMiddleware_Disabled
--- PASS: TestPermissionMiddleware_Disabled (0.00s)
=== RUN   TestPermissionMiddleware_NoClaims
--- PASS: TestPermissionMiddleware_NoClaims (0.00s)
=== RUN   TestPermissionMiddleware_InvalidClaims
--- PASS: TestPermissionMiddleware_InvalidClaims (0.00s)
=== RUN   TestPermissionMiddleware_ValidClaims
--- PASS: TestPermissionMiddleware_ValidClaims (0.00s)
=== RUN   TestRequirePermission_Disabled
--- PASS: TestRequirePermission_Disabled (0.00s)
=== RUN   TestRequirePermission_NoUsername
--- PASS: TestRequirePermission_NoUsername (0.00s)
=== RUN   TestRequirePermission_InvalidUsername
--- PASS: TestRequirePermission_InvalidUsername (0.00s)
=== RUN   TestRequirePermission_PermissionGranted
--- PASS: TestRequirePermission_PermissionGranted (0.00s)
=== RUN   TestRequirePermission_PermissionDenied
--- PASS: TestRequirePermission_PermissionDenied (0.00s)
=== RUN   TestRequirePermission_ServiceError
--- PASS: TestRequirePermission_ServiceError (0.00s)
=== RUN   TestRequirePermission_DifferentLevels
=== RUN   TestRequirePermission_DifferentLevels/User_has_READ,_requires_READ
=== RUN   TestRequirePermission_DifferentLevels/User_has_UPDATE,_requires_READ
=== RUN   TestRequirePermission_DifferentLevels/User_has_READ,_requires_UPDATE
=== RUN   TestRequirePermission_DifferentLevels/User_has_DELETE,_requires_UPDATE
--- PASS: TestRequirePermission_DifferentLevels (0.00s)
    --- PASS: TestRequirePermission_DifferentLevels/User_has_READ,_requires_READ (0.00s)
    --- PASS: TestRequirePermission_DifferentLevels/User_has_UPDATE,_requires_READ (0.00s)
    --- PASS: TestRequirePermission_DifferentLevels/User_has_READ,_requires_UPDATE (0.00s)
    --- PASS: TestRequirePermission_DifferentLevels/User_has_DELETE,_requires_UPDATE (0.00s)
=== RUN   TestCheckPermissionForAction_Disabled
--- PASS: TestCheckPermissionForAction_Disabled (0.00s)
=== RUN   TestCheckPermissionForAction_NoUsername
--- PASS: TestCheckPermissionForAction_NoUsername (0.00s)
=== RUN   TestCheckPermissionForAction_InvalidUsername
--- PASS: TestCheckPermissionForAction_InvalidUsername (0.00s)
=== RUN   TestCheckPermissionForAction_Success
=== RUN   TestCheckPermissionForAction_Success/Read_action_allowed
=== RUN   TestCheckPermissionForAction_Success/Create_action_allowed
=== RUN   TestCheckPermissionForAction_Success/Update_action_allowed
=== RUN   TestCheckPermissionForAction_Success/Delete_action_allowed
=== RUN   TestCheckPermissionForAction_Success/Read_action_denied
=== RUN   TestCheckPermissionForAction_Success/Create_action_denied
--- PASS: TestCheckPermissionForAction_Success (0.00s)
    --- PASS: TestCheckPermissionForAction_Success/Read_action_allowed (0.00s)
    --- PASS: TestCheckPermissionForAction_Success/Create_action_allowed (0.00s)
    --- PASS: TestCheckPermissionForAction_Success/Update_action_allowed (0.00s)
    --- PASS: TestCheckPermissionForAction_Success/Delete_action_allowed (0.00s)
    --- PASS: TestCheckPermissionForAction_Success/Read_action_denied (0.00s)
    --- PASS: TestCheckPermissionForAction_Success/Create_action_denied (0.00s)
=== RUN   TestCheckPermissionForAction_ServiceError
--- PASS: TestCheckPermissionForAction_ServiceError (0.00s)
=== RUN   TestGetUserPermissions_NoUsername
--- PASS: TestGetUserPermissions_NoUsername (0.00s)
=== RUN   TestGetUserPermissions_InvalidUsername
--- PASS: TestGetUserPermissions_InvalidUsername (0.00s)
=== RUN   TestGetUserPermissions_Success
--- PASS: TestGetUserPermissions_Success (0.00s)
=== RUN   TestGetUserPermissions_ServiceError
--- PASS: TestGetUserPermissions_ServiceError (0.00s)
=== RUN   TestPermissionMiddleware_Integration
=== RUN   TestPermissionMiddleware_Integration/Admin_has_permission
=== RUN   TestPermissionMiddleware_Integration/User_denied_permission
--- PASS: TestPermissionMiddleware_Integration (0.00s)
    --- PASS: TestPermissionMiddleware_Integration/Admin_has_permission (0.00s)
    --- PASS: TestPermissionMiddleware_Integration/User_denied_permission (0.00s)
FAIL
coverage: 92.6% of statements
FAIL	helixtrack.ru/core/internal/middleware	0.615s
=== RUN   TestCustomField_IsValidFieldType
=== RUN   TestCustomField_IsValidFieldType/Text_type
=== RUN   TestCustomField_IsValidFieldType/TextArea_type
=== RUN   TestCustomField_IsValidFieldType/Number_type
=== RUN   TestCustomField_IsValidFieldType/Date_type
=== RUN   TestCustomField_IsValidFieldType/DateTime_type
=== RUN   TestCustomField_IsValidFieldType/Select_type
=== RUN   TestCustomField_IsValidFieldType/MultiSelect_type
=== RUN   TestCustomField_IsValidFieldType/User_type
=== RUN   TestCustomField_IsValidFieldType/URL_type
=== RUN   TestCustomField_IsValidFieldType/Checkbox_type
=== RUN   TestCustomField_IsValidFieldType/Radio_type
=== RUN   TestCustomField_IsValidFieldType/Invalid_type
=== RUN   TestCustomField_IsValidFieldType/Empty_type
--- PASS: TestCustomField_IsValidFieldType (0.00s)
    --- PASS: TestCustomField_IsValidFieldType/Text_type (0.00s)
    --- PASS: TestCustomField_IsValidFieldType/TextArea_type (0.00s)
    --- PASS: TestCustomField_IsValidFieldType/Number_type (0.00s)
    --- PASS: TestCustomField_IsValidFieldType/Date_type (0.00s)
    --- PASS: TestCustomField_IsValidFieldType/DateTime_type (0.00s)
    --- PASS: TestCustomField_IsValidFieldType/Select_type (0.00s)
    --- PASS: TestCustomField_IsValidFieldType/MultiSelect_type (0.00s)
    --- PASS: TestCustomField_IsValidFieldType/User_type (0.00s)
    --- PASS: TestCustomField_IsValidFieldType/URL_type (0.00s)
    --- PASS: TestCustomField_IsValidFieldType/Checkbox_type (0.00s)
    --- PASS: TestCustomField_IsValidFieldType/Radio_type (0.00s)
    --- PASS: TestCustomField_IsValidFieldType/Invalid_type (0.00s)
    --- PASS: TestCustomField_IsValidFieldType/Empty_type (0.00s)
=== RUN   TestCustomField_IsGlobal
=== RUN   TestCustomField_IsGlobal/Global_field_(nil_project)
=== RUN   TestCustomField_IsGlobal/Project-specific_field
--- PASS: TestCustomField_IsGlobal (0.00s)
    --- PASS: TestCustomField_IsGlobal/Global_field_(nil_project) (0.00s)
    --- PASS: TestCustomField_IsGlobal/Project-specific_field (0.00s)
=== RUN   TestCustomField_IsSelectType
=== RUN   TestCustomField_IsSelectType/Select_type
=== RUN   TestCustomField_IsSelectType/MultiSelect_type
=== RUN   TestCustomField_IsSelectType/Text_type_(not_select)
=== RUN   TestCustomField_IsSelectType/Number_type_(not_select)
--- PASS: TestCustomField_IsSelectType (0.00s)
    --- PASS: TestCustomField_IsSelectType/Select_type (0.00s)
    --- PASS: TestCustomField_IsSelectType/MultiSelect_type (0.00s)
    --- PASS: TestCustomField_IsSelectType/Text_type_(not_select) (0.00s)
    --- PASS: TestCustomField_IsSelectType/Number_type_(not_select) (0.00s)
=== RUN   TestCustomField_RequiresOptions
=== RUN   TestCustomField_RequiresOptions/Select_type
=== RUN   TestCustomField_RequiresOptions/MultiSelect_type
=== RUN   TestCustomField_RequiresOptions/Radio_type
=== RUN   TestCustomField_RequiresOptions/Text_type_(no_options)
=== RUN   TestCustomField_RequiresOptions/Number_type_(no_options)
=== RUN   TestCustomField_RequiresOptions/Checkbox_type_(no_options)
--- PASS: TestCustomField_RequiresOptions (0.00s)
    --- PASS: TestCustomField_RequiresOptions/Select_type (0.00s)
    --- PASS: TestCustomField_RequiresOptions/MultiSelect_type (0.00s)
    --- PASS: TestCustomField_RequiresOptions/Radio_type (0.00s)
    --- PASS: TestCustomField_RequiresOptions/Text_type_(no_options) (0.00s)
    --- PASS: TestCustomField_RequiresOptions/Number_type_(no_options) (0.00s)
    --- PASS: TestCustomField_RequiresOptions/Checkbox_type_(no_options) (0.00s)
=== RUN   TestCustomFieldOption_Structure
--- PASS: TestCustomFieldOption_Structure (0.00s)
=== RUN   TestTicketCustomFieldValue_Structure
--- PASS: TestTicketCustomFieldValue_Structure (0.00s)
=== RUN   TestCustomFieldTypes_Constants
--- PASS: TestCustomFieldTypes_Constants (0.00s)
=== RUN   TestCustomField_Complete
--- PASS: TestCustomField_Complete (0.00s)
=== RUN   TestErrorCodeConstants
--- PASS: TestErrorCodeConstants (0.00s)
=== RUN   TestGetErrorMessage
=== RUN   TestGetErrorMessage/No_error_message
=== RUN   TestGetErrorMessage/Invalid_request_message
=== RUN   TestGetErrorMessage/Invalid_action_message
=== RUN   TestGetErrorMessage/Missing_JWT_message
=== RUN   TestGetErrorMessage/Invalid_JWT_message
=== RUN   TestGetErrorMessage/Missing_object_message
=== RUN   TestGetErrorMessage/Invalid_object_message
=== RUN   TestGetErrorMessage/Missing_data_message
=== RUN   TestGetErrorMessage/Invalid_data_message
=== RUN   TestGetErrorMessage/Unauthorized_message
=== RUN   TestGetErrorMessage/Forbidden_message
=== RUN   TestGetErrorMessage/Internal_error_message
=== RUN   TestGetErrorMessage/Database_error_message
=== RUN   TestGetErrorMessage/Service_unavailable_message
=== RUN   TestGetErrorMessage/Configuration_error_message
=== RUN   TestGetErrorMessage/Auth_service_error_message
=== RUN   TestGetErrorMessage/Permission_service_error_message
=== RUN   TestGetErrorMessage/Extension_service_error_message
=== RUN   TestGetErrorMessage/Entity_not_found_message
=== RUN   TestGetErrorMessage/Entity_already_exists_message
=== RUN   TestGetErrorMessage/Entity_validation_failed_message
=== RUN   TestGetErrorMessage/Entity_delete_failed_message
=== RUN   TestGetErrorMessage/Entity_update_failed_message
=== RUN   TestGetErrorMessage/Entity_create_failed_message
=== RUN   TestGetErrorMessage/Unknown_error_code
--- PASS: TestGetErrorMessage (0.00s)
    --- PASS: TestGetErrorMessage/No_error_message (0.00s)
    --- PASS: TestGetErrorMessage/Invalid_request_message (0.00s)
    --- PASS: TestGetErrorMessage/Invalid_action_message (0.00s)
    --- PASS: TestGetErrorMessage/Missing_JWT_message (0.00s)
    --- PASS: TestGetErrorMessage/Invalid_JWT_message (0.00s)
    --- PASS: TestGetErrorMessage/Missing_object_message (0.00s)
    --- PASS: TestGetErrorMessage/Invalid_object_message (0.00s)
    --- PASS: TestGetErrorMessage/Missing_data_message (0.00s)
    --- PASS: TestGetErrorMessage/Invalid_data_message (0.00s)
    --- PASS: TestGetErrorMessage/Unauthorized_message (0.00s)
    --- PASS: TestGetErrorMessage/Forbidden_message (0.00s)
    --- PASS: TestGetErrorMessage/Internal_error_message (0.00s)
    --- PASS: TestGetErrorMessage/Database_error_message (0.00s)
    --- PASS: TestGetErrorMessage/Service_unavailable_message (0.00s)
    --- PASS: TestGetErrorMessage/Configuration_error_message (0.00s)
    --- PASS: TestGetErrorMessage/Auth_service_error_message (0.00s)
    --- PASS: TestGetErrorMessage/Permission_service_error_message (0.00s)
    --- PASS: TestGetErrorMessage/Extension_service_error_message (0.00s)
    --- PASS: TestGetErrorMessage/Entity_not_found_message (0.00s)
    --- PASS: TestGetErrorMessage/Entity_already_exists_message (0.00s)
    --- PASS: TestGetErrorMessage/Entity_validation_failed_message (0.00s)
    --- PASS: TestGetErrorMessage/Entity_delete_failed_message (0.00s)
    --- PASS: TestGetErrorMessage/Entity_update_failed_message (0.00s)
    --- PASS: TestGetErrorMessage/Entity_create_failed_message (0.00s)
    --- PASS: TestGetErrorMessage/Unknown_error_code (0.00s)
=== RUN   TestErrorMessages_Completeness
=== RUN   TestErrorMessages_Completeness/Error_code_has_message
=== RUN   TestErrorMessages_Completeness/Error_code_has_message#01
=== RUN   TestErrorMessages_Completeness/Error_code_has_message#02
=== RUN   TestErrorMessages_Completeness/Error_code_has_message#03
=== RUN   TestErrorMessages_Completeness/Error_code_has_message#04
=== RUN   TestErrorMessages_Completeness/Error_code_has_message#05
=== RUN   TestErrorMessages_Completeness/Error_code_has_message#06
=== RUN   TestErrorMessages_Completeness/Error_code_has_message#07
=== RUN   TestErrorMessages_Completeness/Error_code_has_message#08
=== RUN   TestErrorMessages_Completeness/Error_code_has_message#09
=== RUN   TestErrorMessages_Completeness/Error_code_has_message#10
=== RUN   TestErrorMessages_Completeness/Error_code_has_message#11
=== RUN   TestErrorMessages_Completeness/Error_code_has_message#12
=== RUN   TestErrorMessages_Completeness/Error_code_has_message#13
=== RUN   TestErrorMessages_Completeness/Error_code_has_message#14
=== RUN   TestErrorMessages_Completeness/Error_code_has_message#15
=== RUN   TestErrorMessages_Completeness/Error_code_has_message#16
=== RUN   TestErrorMessages_Completeness/Error_code_has_message#17
=== RUN   TestErrorMessages_Completeness/Error_code_has_message#18
=== RUN   TestErrorMessages_Completeness/Error_code_has_message#19
=== RUN   TestErrorMessages_Completeness/Error_code_has_message#20
=== RUN   TestErrorMessages_Completeness/Error_code_has_message#21
=== RUN   TestErrorMessages_Completeness/Error_code_has_message#22
=== RUN   TestErrorMessages_Completeness/Error_code_has_message#23
--- PASS: TestErrorMessages_Completeness (0.00s)
    --- PASS: TestErrorMessages_Completeness/Error_code_has_message (0.00s)
    --- PASS: TestErrorMessages_Completeness/Error_code_has_message#01 (0.00s)
    --- PASS: TestErrorMessages_Completeness/Error_code_has_message#02 (0.00s)
    --- PASS: TestErrorMessages_Completeness/Error_code_has_message#03 (0.00s)
    --- PASS: TestErrorMessages_Completeness/Error_code_has_message#04 (0.00s)
    --- PASS: TestErrorMessages_Completeness/Error_code_has_message#05 (0.00s)
    --- PASS: TestErrorMessages_Completeness/Error_code_has_message#06 (0.00s)
    --- PASS: TestErrorMessages_Completeness/Error_code_has_message#07 (0.00s)
    --- PASS: TestErrorMessages_Completeness/Error_code_has_message#08 (0.00s)
    --- PASS: TestErrorMessages_Completeness/Error_code_has_message#09 (0.00s)
    --- PASS: TestErrorMessages_Completeness/Error_code_has_message#10 (0.00s)
    --- PASS: TestErrorMessages_Completeness/Error_code_has_message#11 (0.00s)
    --- PASS: TestErrorMessages_Completeness/Error_code_has_message#12 (0.00s)
    --- PASS: TestErrorMessages_Completeness/Error_code_has_message#13 (0.00s)
    --- PASS: TestErrorMessages_Completeness/Error_code_has_message#14 (0.00s)
    --- PASS: TestErrorMessages_Completeness/Error_code_has_message#15 (0.00s)
    --- PASS: TestErrorMessages_Completeness/Error_code_has_message#16 (0.00s)
    --- PASS: TestErrorMessages_Completeness/Error_code_has_message#17 (0.00s)
    --- PASS: TestErrorMessages_Completeness/Error_code_has_message#18 (0.00s)
    --- PASS: TestErrorMessages_Completeness/Error_code_has_message#19 (0.00s)
    --- PASS: TestErrorMessages_Completeness/Error_code_has_message#20 (0.00s)
    --- PASS: TestErrorMessages_Completeness/Error_code_has_message#21 (0.00s)
    --- PASS: TestErrorMessages_Completeness/Error_code_has_message#22 (0.00s)
    --- PASS: TestErrorMessages_Completeness/Error_code_has_message#23 (0.00s)
=== RUN   TestNewEvent
=== RUN   TestNewEvent/Create_ticket_event
=== RUN   TestNewEvent/Update_project_event
=== RUN   TestNewEvent/Delete_comment_event
--- PASS: TestNewEvent (0.00s)
    --- PASS: TestNewEvent/Create_ticket_event (0.00s)
    --- PASS: TestNewEvent/Update_project_event (0.00s)
    --- PASS: TestNewEvent/Delete_comment_event (0.00s)
=== RUN   TestEvent_WithContext
--- PASS: TestEvent_WithContext (0.00s)
=== RUN   TestEvent_MatchesSubscription
=== RUN   TestEvent_MatchesSubscription/Match_by_event_type
=== RUN   TestEvent_MatchesSubscription/No_match_by_event_type
=== RUN   TestEvent_MatchesSubscription/Match_by_entity_type
=== RUN   TestEvent_MatchesSubscription/No_match_by_entity_type
=== RUN   TestEvent_MatchesSubscription/Match_by_entity_ID
=== RUN   TestEvent_MatchesSubscription/No_match_by_entity_ID
=== RUN   TestEvent_MatchesSubscription/Filter_read_events_when_includeReads_is_false
=== RUN   TestEvent_MatchesSubscription/Include_read_events_when_includeReads_is_true
=== RUN   TestEvent_MatchesSubscription/Match_by_project_filter
=== RUN   TestEvent_MatchesSubscription/No_match_by_project_filter
=== RUN   TestEvent_MatchesSubscription/Match_by_organization_filter
=== RUN   TestEvent_MatchesSubscription/Match_by_team_filter
=== RUN   TestEvent_MatchesSubscription/Match_by_account_filter
=== RUN   TestEvent_MatchesSubscription/Match_all_criteria
=== RUN   TestEvent_MatchesSubscription/Empty_subscription_matches_all
--- PASS: TestEvent_MatchesSubscription (0.00s)
    --- PASS: TestEvent_MatchesSubscription/Match_by_event_type (0.00s)
    --- PASS: TestEvent_MatchesSubscription/No_match_by_event_type (0.00s)
    --- PASS: TestEvent_MatchesSubscription/Match_by_entity_type (0.00s)
    --- PASS: TestEvent_MatchesSubscription/No_match_by_entity_type (0.00s)
    --- PASS: TestEvent_MatchesSubscription/Match_by_entity_ID (0.00s)
    --- PASS: TestEvent_MatchesSubscription/No_match_by_entity_ID (0.00s)
    --- PASS: TestEvent_MatchesSubscription/Filter_read_events_when_includeReads_is_false (0.00s)
    --- PASS: TestEvent_MatchesSubscription/Include_read_events_when_includeReads_is_true (0.00s)
    --- PASS: TestEvent_MatchesSubscription/Match_by_project_filter (0.00s)
    --- PASS: TestEvent_MatchesSubscription/No_match_by_project_filter (0.00s)
    --- PASS: TestEvent_MatchesSubscription/Match_by_organization_filter (0.00s)
    --- PASS: TestEvent_MatchesSubscription/Match_by_team_filter (0.00s)
    --- PASS: TestEvent_MatchesSubscription/Match_by_account_filter (0.00s)
    --- PASS: TestEvent_MatchesSubscription/Match_all_criteria (0.00s)
    --- PASS: TestEvent_MatchesSubscription/Empty_subscription_matches_all (0.00s)
=== RUN   TestGetEventTypeFromAction
=== RUN   TestGetEventTypeFromAction/Create_ticket
=== RUN   TestGetEventTypeFromAction/Modify_ticket
=== RUN   TestGetEventTypeFromAction/Remove_ticket
=== RUN   TestGetEventTypeFromAction/Read_ticket
=== RUN   TestGetEventTypeFromAction/Create_project
=== RUN   TestGetEventTypeFromAction/Modify_project
=== RUN   TestGetEventTypeFromAction/Remove_project
=== RUN   TestGetEventTypeFromAction/Create_comment
=== RUN   TestGetEventTypeFromAction/Create_priority
=== RUN   TestGetEventTypeFromAction/Modify_priority
=== RUN   TestGetEventTypeFromAction/Create_resolution
=== RUN   TestGetEventTypeFromAction/Create_version
=== RUN   TestGetEventTypeFromAction/Create_filter
=== RUN   TestGetEventTypeFromAction/Create_custom_field
=== RUN   TestGetEventTypeFromAction/Create_board
=== RUN   TestGetEventTypeFromAction/Create_cycle
=== RUN   TestGetEventTypeFromAction/Create_workflow
=== RUN   TestGetEventTypeFromAction/Create_account
=== RUN   TestGetEventTypeFromAction/Create_organization
=== RUN   TestGetEventTypeFromAction/Create_team
=== RUN   TestGetEventTypeFromAction/Create_user
=== RUN   TestGetEventTypeFromAction/Unknown_object_defaults_to_entity_created
=== RUN   TestGetEventTypeFromAction/Unknown_action_defaults_to_entity_created
--- PASS: TestGetEventTypeFromAction (0.00s)
    --- PASS: TestGetEventTypeFromAction/Create_ticket (0.00s)
    --- PASS: TestGetEventTypeFromAction/Modify_ticket (0.00s)
    --- PASS: TestGetEventTypeFromAction/Remove_ticket (0.00s)
    --- PASS: TestGetEventTypeFromAction/Read_ticket (0.00s)
    --- PASS: TestGetEventTypeFromAction/Create_project (0.00s)
    --- PASS: TestGetEventTypeFromAction/Modify_project (0.00s)
    --- PASS: TestGetEventTypeFromAction/Remove_project (0.00s)
    --- PASS: TestGetEventTypeFromAction/Create_comment (0.00s)
    --- PASS: TestGetEventTypeFromAction/Create_priority (0.00s)
    --- PASS: TestGetEventTypeFromAction/Modify_priority (0.00s)
    --- PASS: TestGetEventTypeFromAction/Create_resolution (0.00s)
    --- PASS: TestGetEventTypeFromAction/Create_version (0.00s)
    --- PASS: TestGetEventTypeFromAction/Create_filter (0.00s)
    --- PASS: TestGetEventTypeFromAction/Create_custom_field (0.00s)
    --- PASS: TestGetEventTypeFromAction/Create_board (0.00s)
    --- PASS: TestGetEventTypeFromAction/Create_cycle (0.00s)
    --- PASS: TestGetEventTypeFromAction/Create_workflow (0.00s)
    --- PASS: TestGetEventTypeFromAction/Create_account (0.00s)
    --- PASS: TestGetEventTypeFromAction/Create_organization (0.00s)
    --- PASS: TestGetEventTypeFromAction/Create_team (0.00s)
    --- PASS: TestGetEventTypeFromAction/Create_user (0.00s)
    --- PASS: TestGetEventTypeFromAction/Unknown_object_defaults_to_entity_created (0.00s)
    --- PASS: TestGetEventTypeFromAction/Unknown_action_defaults_to_entity_created (0.00s)
=== RUN   TestIsReadEvent
=== RUN   TestIsReadEvent/Entity_read
=== RUN   TestIsReadEvent/Ticket_read
=== RUN   TestIsReadEvent/Project_read
=== RUN   TestIsReadEvent/Comment_read
=== RUN   TestIsReadEvent/Priority_read
=== RUN   TestIsReadEvent/Resolution_read
=== RUN   TestIsReadEvent/Version_read
=== RUN   TestIsReadEvent/Custom_field_read
=== RUN   TestIsReadEvent/Ticket_created
=== RUN   TestIsReadEvent/Ticket_updated
=== RUN   TestIsReadEvent/Ticket_deleted
=== RUN   TestIsReadEvent/Project_created
--- PASS: TestIsReadEvent (0.00s)
    --- PASS: TestIsReadEvent/Entity_read (0.00s)
    --- PASS: TestIsReadEvent/Ticket_read (0.00s)
    --- PASS: TestIsReadEvent/Project_read (0.00s)
    --- PASS: TestIsReadEvent/Comment_read (0.00s)
    --- PASS: TestIsReadEvent/Priority_read (0.00s)
    --- PASS: TestIsReadEvent/Resolution_read (0.00s)
    --- PASS: TestIsReadEvent/Version_read (0.00s)
    --- PASS: TestIsReadEvent/Custom_field_read (0.00s)
    --- PASS: TestIsReadEvent/Ticket_created (0.00s)
    --- PASS: TestIsReadEvent/Ticket_updated (0.00s)
    --- PASS: TestIsReadEvent/Ticket_deleted (0.00s)
    --- PASS: TestIsReadEvent/Project_created (0.00s)
=== RUN   TestEventTypes
--- PASS: TestEventTypes (0.00s)
=== RUN   TestEventContext
=== RUN   TestEventContext/Full_context
=== RUN   TestEventContext/Project_context_only
=== RUN   TestEventContext/Organization_context_only
=== RUN   TestEventContext/Empty_context
--- PASS: TestEventContext (0.00s)
    --- PASS: TestEventContext/Full_context (0.00s)
    --- PASS: TestEventContext/Project_context_only (0.00s)
    --- PASS: TestEventContext/Organization_context_only (0.00s)
    --- PASS: TestEventContext/Empty_context (0.00s)
=== RUN   TestSubscription
--- PASS: TestSubscription (0.00s)
=== RUN   TestFilterShareMapping_GetShareType
=== RUN   TestFilterShareMapping_GetShareType/User_share
=== RUN   TestFilterShareMapping_GetShareType/Team_share
=== RUN   TestFilterShareMapping_GetShareType/Project_share
=== RUN   TestFilterShareMapping_GetShareType/Public_share_(no_IDs)
--- PASS: TestFilterShareMapping_GetShareType (0.00s)
    --- PASS: TestFilterShareMapping_GetShareType/User_share (0.00s)
    --- PASS: TestFilterShareMapping_GetShareType/Team_share (0.00s)
    --- PASS: TestFilterShareMapping_GetShareType/Project_share (0.00s)
    --- PASS: TestFilterShareMapping_GetShareType/Public_share_(no_IDs) (0.00s)
=== RUN   TestFilter_IsSharedWith
=== RUN   TestFilter_IsSharedWith/Public_filter_-_always_shared
=== RUN   TestFilter_IsSharedWith/Shared_with_specific_user
=== RUN   TestFilter_IsSharedWith/Shared_with_specific_team
=== RUN   TestFilter_IsSharedWith/Not_shared_with_user
=== RUN   TestFilter_IsSharedWith/Deleted_share_-_not_counted
--- PASS: TestFilter_IsSharedWith (0.00s)
    --- PASS: TestFilter_IsSharedWith/Public_filter_-_always_shared (0.00s)
    --- PASS: TestFilter_IsSharedWith/Shared_with_specific_user (0.00s)
    --- PASS: TestFilter_IsSharedWith/Shared_with_specific_team (0.00s)
    --- PASS: TestFilter_IsSharedWith/Not_shared_with_user (0.00s)
    --- PASS: TestFilter_IsSharedWith/Deleted_share_-_not_counted (0.00s)
=== RUN   TestShareType_Constants
--- PASS: TestShareType_Constants (0.00s)
=== RUN   TestFilter_Structure
--- PASS: TestFilter_Structure (0.00s)
=== RUN   TestFilterShareMapping_Structure
--- PASS: TestFilterShareMapping_Structure (0.00s)
=== RUN   TestFilter_IsSharedWith_MultipleShares
--- PASS: TestFilter_IsSharedWith_MultipleShares (0.00s)
=== RUN   TestJWTClaims_Structure
--- PASS: TestJWTClaims_Structure (0.00s)
=== RUN   TestPermissionLevel_Constants
--- PASS: TestPermissionLevel_Constants (0.00s)
=== RUN   TestPermissionLevel_HasPermission
=== RUN   TestPermissionLevel_HasPermission/Delete_has_Read_permission
=== RUN   TestPermissionLevel_HasPermission/Delete_has_Create_permission
=== RUN   TestPermissionLevel_HasPermission/Delete_has_Update_permission
=== RUN   TestPermissionLevel_HasPermission/Delete_has_Delete_permission
=== RUN   TestPermissionLevel_HasPermission/Update_has_Read_permission
=== RUN   TestPermissionLevel_HasPermission/Update_has_Create_permission
=== RUN   TestPermissionLevel_HasPermission/Update_has_Update_permission
=== RUN   TestPermissionLevel_HasPermission/Update_does_not_have_Delete_permission
=== RUN   TestPermissionLevel_HasPermission/Create_has_Read_permission
=== RUN   TestPermissionLevel_HasPermission/Create_has_Create_permission
=== RUN   TestPermissionLevel_HasPermission/Create_does_not_have_Update_permission
=== RUN   TestPermissionLevel_HasPermission/Create_does_not_have_Delete_permission
=== RUN   TestPermissionLevel_HasPermission/Read_has_Read_permission
=== RUN   TestPermissionLevel_HasPermission/Read_does_not_have_Create_permission
=== RUN   TestPermissionLevel_HasPermission/Read_does_not_have_Update_permission
=== RUN   TestPermissionLevel_HasPermission/Read_does_not_have_Delete_permission
--- PASS: TestPermissionLevel_HasPermission (0.00s)
    --- PASS: TestPermissionLevel_HasPermission/Delete_has_Read_permission (0.00s)
    --- PASS: TestPermissionLevel_HasPermission/Delete_has_Create_permission (0.00s)
    --- PASS: TestPermissionLevel_HasPermission/Delete_has_Update_permission (0.00s)
    --- PASS: TestPermissionLevel_HasPermission/Delete_has_Delete_permission (0.00s)
    --- PASS: TestPermissionLevel_HasPermission/Update_has_Read_permission (0.00s)
    --- PASS: TestPermissionLevel_HasPermission/Update_has_Create_permission (0.00s)
    --- PASS: TestPermissionLevel_HasPermission/Update_has_Update_permission (0.00s)
    --- PASS: TestPermissionLevel_HasPermission/Update_does_not_have_Delete_permission (0.00s)
    --- PASS: TestPermissionLevel_HasPermission/Create_has_Read_permission (0.00s)
    --- PASS: TestPermissionLevel_HasPermission/Create_has_Create_permission (0.00s)
    --- PASS: TestPermissionLevel_HasPermission/Create_does_not_have_Update_permission (0.00s)
    --- PASS: TestPermissionLevel_HasPermission/Create_does_not_have_Delete_permission (0.00s)
    --- PASS: TestPermissionLevel_HasPermission/Read_has_Read_permission (0.00s)
    --- PASS: TestPermissionLevel_HasPermission/Read_does_not_have_Create_permission (0.00s)
    --- PASS: TestPermissionLevel_HasPermission/Read_does_not_have_Update_permission (0.00s)
    --- PASS: TestPermissionLevel_HasPermission/Read_does_not_have_Delete_permission (0.00s)
=== RUN   TestPermission_Structure
--- PASS: TestPermission_Structure (0.00s)
=== RUN   TestPermissionLevel_String
=== RUN   TestPermissionLevel_String/None_level
=== RUN   TestPermissionLevel_String/Read_level
=== RUN   TestPermissionLevel_String/Create_level
=== RUN   TestPermissionLevel_String/Update_level
=== RUN   TestPermissionLevel_String/Delete_level
=== RUN   TestPermissionLevel_String/Unknown_level
--- PASS: TestPermissionLevel_String (0.00s)
    --- PASS: TestPermissionLevel_String/None_level (0.00s)
    --- PASS: TestPermissionLevel_String/Read_level (0.00s)
    --- PASS: TestPermissionLevel_String/Create_level (0.00s)
    --- PASS: TestPermissionLevel_String/Update_level (0.00s)
    --- PASS: TestPermissionLevel_String/Delete_level (0.00s)
    --- PASS: TestPermissionLevel_String/Unknown_level (0.00s)
=== RUN   TestParsePermissionLevel
=== RUN   TestParsePermissionLevel/Parse_READ
=== RUN   TestParsePermissionLevel/Parse_read_(lowercase)
=== RUN   TestParsePermissionLevel/Parse_CREATE
=== RUN   TestParsePermissionLevel/Parse_UPDATE
=== RUN   TestParsePermissionLevel/Parse_DELETE
=== RUN   TestParsePermissionLevel/Parse_ALL
=== RUN   TestParsePermissionLevel/Parse_unknown
=== RUN   TestParsePermissionLevel/Parse_empty
--- PASS: TestParsePermissionLevel (0.00s)
    --- PASS: TestParsePermissionLevel/Parse_READ (0.00s)
    --- PASS: TestParsePermissionLevel/Parse_read_(lowercase) (0.00s)
    --- PASS: TestParsePermissionLevel/Parse_CREATE (0.00s)
    --- PASS: TestParsePermissionLevel/Parse_UPDATE (0.00s)
    --- PASS: TestParsePermissionLevel/Parse_DELETE (0.00s)
    --- PASS: TestParsePermissionLevel/Parse_ALL (0.00s)
    --- PASS: TestParsePermissionLevel/Parse_unknown (0.00s)
    --- PASS: TestParsePermissionLevel/Parse_empty (0.00s)
=== RUN   TestBuildContextPath
=== RUN   TestBuildContextPath/Single_context
=== RUN   TestBuildContextPath/Two_contexts
=== RUN   TestBuildContextPath/Full_hierarchy
=== RUN   TestBuildContextPath/Empty_contexts
--- PASS: TestBuildContextPath (0.00s)
    --- PASS: TestBuildContextPath/Single_context (0.00s)
    --- PASS: TestBuildContextPath/Two_contexts (0.00s)
    --- PASS: TestBuildContextPath/Full_hierarchy (0.00s)
    --- PASS: TestBuildContextPath/Empty_contexts (0.00s)
=== RUN   TestParseContextPath
=== RUN   TestParseContextPath/Single_context
=== RUN   TestParseContextPath/Two_contexts
=== RUN   TestParseContextPath/Full_hierarchy
=== RUN   TestParseContextPath/Empty_path
--- PASS: TestParseContextPath (0.00s)
    --- PASS: TestParseContextPath/Single_context (0.00s)
    --- PASS: TestParseContextPath/Two_contexts (0.00s)
    --- PASS: TestParseContextPath/Full_hierarchy (0.00s)
    --- PASS: TestParseContextPath/Empty_path (0.00s)
=== RUN   TestIsParentContext
=== RUN   TestIsParentContext/Direct_parent
=== RUN   TestIsParentContext/Grandparent
=== RUN   TestIsParentContext/Not_a_parent_-_different_hierarchy
=== RUN   TestIsParentContext/Not_a_parent_-_same_level
=== RUN   TestIsParentContext/Not_a_parent_-_child_is_parent
=== RUN   TestIsParentContext/Parent_with_multiple_levels
=== RUN   TestIsParentContext/Not_a_parent_-_partial_match
--- PASS: TestIsParentContext (0.00s)
    --- PASS: TestIsParentContext/Direct_parent (0.00s)
    --- PASS: TestIsParentContext/Grandparent (0.00s)
    --- PASS: TestIsParentContext/Not_a_parent_-_different_hierarchy (0.00s)
    --- PASS: TestIsParentContext/Not_a_parent_-_same_level (0.00s)
    --- PASS: TestIsParentContext/Not_a_parent_-_child_is_parent (0.00s)
    --- PASS: TestIsParentContext/Parent_with_multiple_levels (0.00s)
    --- PASS: TestIsParentContext/Not_a_parent_-_partial_match (0.00s)
=== RUN   TestGetRequiredPermissionLevel
=== RUN   TestGetRequiredPermissionLevel/create_action
=== RUN   TestGetRequiredPermissionLevel/priorityCreate_action
=== RUN   TestGetRequiredPermissionLevel/versionCreate_action
=== RUN   TestGetRequiredPermissionLevel/modify_action
=== RUN   TestGetRequiredPermissionLevel/update_action
=== RUN   TestGetRequiredPermissionLevel/priorityModify_action
=== RUN   TestGetRequiredPermissionLevel/edit_action
=== RUN   TestGetRequiredPermissionLevel/remove_action
=== RUN   TestGetRequiredPermissionLevel/delete_action
=== RUN   TestGetRequiredPermissionLevel/priorityRemove_action
=== RUN   TestGetRequiredPermissionLevel/read_action
=== RUN   TestGetRequiredPermissionLevel/list_action
=== RUN   TestGetRequiredPermissionLevel/priorityRead_action
=== RUN   TestGetRequiredPermissionLevel/version_action
=== RUN   TestGetRequiredPermissionLevel/health_action
--- PASS: TestGetRequiredPermissionLevel (0.00s)
    --- PASS: TestGetRequiredPermissionLevel/create_action (0.00s)
    --- PASS: TestGetRequiredPermissionLevel/priorityCreate_action (0.00s)
    --- PASS: TestGetRequiredPermissionLevel/versionCreate_action (0.00s)
    --- PASS: TestGetRequiredPermissionLevel/modify_action (0.00s)
    --- PASS: TestGetRequiredPermissionLevel/update_action (0.00s)
    --- PASS: TestGetRequiredPermissionLevel/priorityModify_action (0.00s)
    --- PASS: TestGetRequiredPermissionLevel/edit_action (0.00s)
    --- PASS: TestGetRequiredPermissionLevel/remove_action (0.00s)
    --- PASS: TestGetRequiredPermissionLevel/delete_action (0.00s)
    --- PASS: TestGetRequiredPermissionLevel/priorityRemove_action (0.00s)
    --- PASS: TestGetRequiredPermissionLevel/read_action (0.00s)
    --- PASS: TestGetRequiredPermissionLevel/list_action (0.00s)
    --- PASS: TestGetRequiredPermissionLevel/priorityRead_action (0.00s)
    --- PASS: TestGetRequiredPermissionLevel/version_action (0.00s)
    --- PASS: TestGetRequiredPermissionLevel/health_action (0.00s)
=== RUN   TestPermissionFull
--- PASS: TestPermissionFull (0.00s)
=== RUN   TestPermissionCheck
--- PASS: TestPermissionCheck (0.00s)
=== RUN   TestPermissionContext
--- PASS: TestPermissionContext (0.00s)
=== RUN   TestPermissionNone
--- PASS: TestPermissionNone (0.00s)
=== RUN   TestPriority_IsValidLevel
=== RUN   TestPriority_IsValidLevel/Lowest_(1)
=== RUN   TestPriority_IsValidLevel/Low_(2)
=== RUN   TestPriority_IsValidLevel/Medium_(3)
=== RUN   TestPriority_IsValidLevel/High_(4)
=== RUN   TestPriority_IsValidLevel/Highest_(5)
=== RUN   TestPriority_IsValidLevel/Too_low_(0)
=== RUN   TestPriority_IsValidLevel/Too_high_(6)
=== RUN   TestPriority_IsValidLevel/Negative
--- PASS: TestPriority_IsValidLevel (0.00s)
    --- PASS: TestPriority_IsValidLevel/Lowest_(1) (0.00s)
    --- PASS: TestPriority_IsValidLevel/Low_(2) (0.00s)
    --- PASS: TestPriority_IsValidLevel/Medium_(3) (0.00s)
    --- PASS: TestPriority_IsValidLevel/High_(4) (0.00s)
    --- PASS: TestPriority_IsValidLevel/Highest_(5) (0.00s)
    --- PASS: TestPriority_IsValidLevel/Too_low_(0) (0.00s)
    --- PASS: TestPriority_IsValidLevel/Too_high_(6) (0.00s)
    --- PASS: TestPriority_IsValidLevel/Negative (0.00s)
=== RUN   TestPriority_GetDisplayName
=== RUN   TestPriority_GetDisplayName/With_title
=== RUN   TestPriority_GetDisplayName/Empty_title
--- PASS: TestPriority_GetDisplayName (0.00s)
    --- PASS: TestPriority_GetDisplayName/With_title (0.00s)
    --- PASS: TestPriority_GetDisplayName/Empty_title (0.00s)
=== RUN   TestPriorityLevelConstants
--- PASS: TestPriorityLevelConstants (0.00s)
=== RUN   TestPriorityIDConstants
--- PASS: TestPriorityIDConstants (0.00s)
=== RUN   TestPriority_Structure
--- PASS: TestPriority_Structure (0.00s)
=== RUN   TestPriority_AllLevels
--- PASS: TestPriority_AllLevels (0.00s)
=== RUN   TestRequest_IsAuthenticationRequired
=== RUN   TestRequest_IsAuthenticationRequired/Version_action_does_not_require_auth
=== RUN   TestRequest_IsAuthenticationRequired/JWTCapable_action_does_not_require_auth
=== RUN   TestRequest_IsAuthenticationRequired/DBCapable_action_does_not_require_auth
=== RUN   TestRequest_IsAuthenticationRequired/Health_action_does_not_require_auth
=== RUN   TestRequest_IsAuthenticationRequired/Authenticate_action_does_not_require_auth
=== RUN   TestRequest_IsAuthenticationRequired/Create_action_requires_auth
=== RUN   TestRequest_IsAuthenticationRequired/Modify_action_requires_auth
=== RUN   TestRequest_IsAuthenticationRequired/Remove_action_requires_auth
=== RUN   TestRequest_IsAuthenticationRequired/Read_action_requires_auth
=== RUN   TestRequest_IsAuthenticationRequired/List_action_requires_auth
=== RUN   TestRequest_IsAuthenticationRequired/Unknown_action_requires_auth
--- PASS: TestRequest_IsAuthenticationRequired (0.00s)
    --- PASS: TestRequest_IsAuthenticationRequired/Version_action_does_not_require_auth (0.00s)
    --- PASS: TestRequest_IsAuthenticationRequired/JWTCapable_action_does_not_require_auth (0.00s)
    --- PASS: TestRequest_IsAuthenticationRequired/DBCapable_action_does_not_require_auth (0.00s)
    --- PASS: TestRequest_IsAuthenticationRequired/Health_action_does_not_require_auth (0.00s)
    --- PASS: TestRequest_IsAuthenticationRequired/Authenticate_action_does_not_require_auth (0.00s)
    --- PASS: TestRequest_IsAuthenticationRequired/Create_action_requires_auth (0.00s)
    --- PASS: TestRequest_IsAuthenticationRequired/Modify_action_requires_auth (0.00s)
    --- PASS: TestRequest_IsAuthenticationRequired/Remove_action_requires_auth (0.00s)
    --- PASS: TestRequest_IsAuthenticationRequired/Read_action_requires_auth (0.00s)
    --- PASS: TestRequest_IsAuthenticationRequired/List_action_requires_auth (0.00s)
    --- PASS: TestRequest_IsAuthenticationRequired/Unknown_action_requires_auth (0.00s)
=== RUN   TestRequest_IsCRUDOperation
=== RUN   TestRequest_IsCRUDOperation/Create_is_CRUD_operation
=== RUN   TestRequest_IsCRUDOperation/Modify_is_CRUD_operation
=== RUN   TestRequest_IsCRUDOperation/Remove_is_CRUD_operation
=== RUN   TestRequest_IsCRUDOperation/Read_is_not_CRUD_operation_(requires_object_parameter)
=== RUN   TestRequest_IsCRUDOperation/List_is_not_CRUD_operation
=== RUN   TestRequest_IsCRUDOperation/Version_is_not_CRUD_operation
=== RUN   TestRequest_IsCRUDOperation/Health_is_not_CRUD_operation
--- PASS: TestRequest_IsCRUDOperation (0.00s)
    --- PASS: TestRequest_IsCRUDOperation/Create_is_CRUD_operation (0.00s)
    --- PASS: TestRequest_IsCRUDOperation/Modify_is_CRUD_operation (0.00s)
    --- PASS: TestRequest_IsCRUDOperation/Remove_is_CRUD_operation (0.00s)
    --- PASS: TestRequest_IsCRUDOperation/Read_is_not_CRUD_operation_(requires_object_parameter) (0.00s)
    --- PASS: TestRequest_IsCRUDOperation/List_is_not_CRUD_operation (0.00s)
    --- PASS: TestRequest_IsCRUDOperation/Version_is_not_CRUD_operation (0.00s)
    --- PASS: TestRequest_IsCRUDOperation/Health_is_not_CRUD_operation (0.00s)
=== RUN   TestRequest_Structure
--- PASS: TestRequest_Structure (0.00s)
=== RUN   TestActionConstants
--- PASS: TestActionConstants (0.00s)
=== RUN   TestResolution_GetDisplayName
=== RUN   TestResolution_GetDisplayName/With_title
=== RUN   TestResolution_GetDisplayName/Empty_title
--- PASS: TestResolution_GetDisplayName (0.00s)
    --- PASS: TestResolution_GetDisplayName/With_title (0.00s)
    --- PASS: TestResolution_GetDisplayName/Empty_title (0.00s)
=== RUN   TestResolutionIDConstants
--- PASS: TestResolutionIDConstants (0.00s)
=== RUN   TestResolution_Structure
--- PASS: TestResolution_Structure (0.00s)
=== RUN   TestResolution_AllResolutions
--- PASS: TestResolution_AllResolutions (0.00s)
=== RUN   TestNewSuccessResponse
=== RUN   TestNewSuccessResponse/Success_response_with_data
=== RUN   TestNewSuccessResponse/Success_response_with_nil_data
=== RUN   TestNewSuccessResponse/Success_response_with_empty_data
--- PASS: TestNewSuccessResponse (0.00s)
    --- PASS: TestNewSuccessResponse/Success_response_with_data (0.00s)
    --- PASS: TestNewSuccessResponse/Success_response_with_nil_data (0.00s)
    --- PASS: TestNewSuccessResponse/Success_response_with_empty_data (0.00s)
=== RUN   TestNewErrorResponse
=== RUN   TestNewErrorResponse/Error_response_with_all_fields
=== RUN   TestNewErrorResponse/Error_response_with_empty_localised_message
--- PASS: TestNewErrorResponse (0.00s)
    --- PASS: TestNewErrorResponse/Error_response_with_all_fields (0.00s)
    --- PASS: TestNewErrorResponse/Error_response_with_empty_localised_message (0.00s)
=== RUN   TestResponse_IsSuccess
=== RUN   TestResponse_IsSuccess/No_error_is_success
=== RUN   TestResponse_IsSuccess/Error_code_1000_is_not_success
=== RUN   TestResponse_IsSuccess/Error_code_2000_is_not_success
=== RUN   TestResponse_IsSuccess/Error_code_3000_is_not_success
--- PASS: TestResponse_IsSuccess (0.00s)
    --- PASS: TestResponse_IsSuccess/No_error_is_success (0.00s)
    --- PASS: TestResponse_IsSuccess/Error_code_1000_is_not_success (0.00s)
    --- PASS: TestResponse_IsSuccess/Error_code_2000_is_not_success (0.00s)
    --- PASS: TestResponse_IsSuccess/Error_code_3000_is_not_success (0.00s)
=== RUN   TestResponse_Structure
--- PASS: TestResponse_Structure (0.00s)
=== RUN   TestVersion_IsReleased
=== RUN   TestVersion_IsReleased/Released_version
=== RUN   TestVersion_IsReleased/Unreleased_version
--- PASS: TestVersion_IsReleased (0.00s)
    --- PASS: TestVersion_IsReleased/Released_version (0.00s)
    --- PASS: TestVersion_IsReleased/Unreleased_version (0.00s)
=== RUN   TestVersion_IsArchived
=== RUN   TestVersion_IsArchived/Archived_version
=== RUN   TestVersion_IsArchived/Not_archived_version
--- PASS: TestVersion_IsArchived (0.00s)
    --- PASS: TestVersion_IsArchived/Archived_version (0.00s)
    --- PASS: TestVersion_IsArchived/Not_archived_version (0.00s)
=== RUN   TestVersion_IsActive
=== RUN   TestVersion_IsActive/Active_version
=== RUN   TestVersion_IsActive/Archived_version
=== RUN   TestVersion_IsActive/Deleted_version
=== RUN   TestVersion_IsActive/Archived_and_deleted
--- PASS: TestVersion_IsActive (0.00s)
    --- PASS: TestVersion_IsActive/Active_version (0.00s)
    --- PASS: TestVersion_IsActive/Archived_version (0.00s)
    --- PASS: TestVersion_IsActive/Deleted_version (0.00s)
    --- PASS: TestVersion_IsActive/Archived_and_deleted (0.00s)
=== RUN   TestVersion_Structure
--- PASS: TestVersion_Structure (0.00s)
=== RUN   TestVersion_NullableDates
--- PASS: TestVersion_NullableDates (0.00s)
=== RUN   TestTicketVersionMapping_Structure
--- PASS: TestTicketVersionMapping_Structure (0.00s)
=== RUN   TestVersion_LifecycleStates
--- PASS: TestVersion_LifecycleStates (0.00s)
=== RUN   TestIsWatching
=== RUN   TestIsWatching/User_watching_ticket
=== RUN   TestIsWatching/User_watching_different_ticket
=== RUN   TestIsWatching/User_not_watching
=== RUN   TestIsWatching/Different_user_watching_same_ticket
=== RUN   TestIsWatching/Deleted_watcher_not_counted
=== RUN   TestIsWatching/Non-existent_user
--- PASS: TestIsWatching (0.00s)
    --- PASS: TestIsWatching/User_watching_ticket (0.00s)
    --- PASS: TestIsWatching/User_watching_different_ticket (0.00s)
    --- PASS: TestIsWatching/User_not_watching (0.00s)
    --- PASS: TestIsWatching/Different_user_watching_same_ticket (0.00s)
    --- PASS: TestIsWatching/Deleted_watcher_not_counted (0.00s)
    --- PASS: TestIsWatching/Non-existent_user (0.00s)
=== RUN   TestGetWatcherCount
=== RUN   TestGetWatcherCount/Ticket_with_2_watchers
=== RUN   TestGetWatcherCount/Ticket_with_1_watcher
=== RUN   TestGetWatcherCount/Ticket_with_no_watchers
--- PASS: TestGetWatcherCount (0.00s)
    --- PASS: TestGetWatcherCount/Ticket_with_2_watchers (0.00s)
    --- PASS: TestGetWatcherCount/Ticket_with_1_watcher (0.00s)
    --- PASS: TestGetWatcherCount/Ticket_with_no_watchers (0.00s)
=== RUN   TestTicketWatcherMapping_Structure
--- PASS: TestTicketWatcherMapping_Structure (0.00s)
=== RUN   TestIsWatching_EmptyList
--- PASS: TestIsWatching_EmptyList (0.00s)
=== RUN   TestGetWatcherCount_EmptyList
--- PASS: TestGetWatcherCount_EmptyList (0.00s)
=== RUN   TestIsWatching_MultipleTickets
--- PASS: TestIsWatching_MultipleTickets (0.00s)
=== RUN   TestNewClient
--- PASS: TestNewClient (0.00s)
=== RUN   TestClient_UpdateSubscription
--- PASS: TestClient_UpdateSubscription (0.00s)
=== RUN   TestClient_GetSubscription
--- PASS: TestClient_GetSubscription (0.00s)
=== RUN   TestClient_UpdateActivity
--- PASS: TestClient_UpdateActivity (0.01s)
=== RUN   TestClient_UpdatePing
--- PASS: TestClient_UpdatePing (0.01s)
=== RUN   TestClient_GetLastActivity
--- PASS: TestClient_GetLastActivity (0.00s)
=== RUN   TestClient_GetLastPing
--- PASS: TestClient_GetLastPing (0.00s)
=== RUN   TestClient_HasPermission
=== RUN   TestClient_HasPermission/Has_READ_permission
=== RUN   TestClient_HasPermission/Has_UPDATE_permission
=== RUN   TestClient_HasPermission/Has_DELETE_permission
=== RUN   TestClient_HasPermission/Does_not_have_permission
=== RUN   TestClient_HasPermission/No_claims
--- PASS: TestClient_HasPermission (0.00s)
    --- PASS: TestClient_HasPermission/Has_READ_permission (0.00s)
    --- PASS: TestClient_HasPermission/Has_UPDATE_permission (0.00s)
    --- PASS: TestClient_HasPermission/Has_DELETE_permission (0.00s)
    --- PASS: TestClient_HasPermission/Does_not_have_permission (0.00s)
    --- PASS: TestClient_HasPermission/No_claims (0.00s)
=== RUN   TestNewWebSocketMessage
--- PASS: TestNewWebSocketMessage (0.00s)
=== RUN   TestNewErrorMessage
--- PASS: TestNewErrorMessage (0.00s)
=== RUN   TestNewEventMessage
--- PASS: TestNewEventMessage (0.00s)
=== RUN   TestWebSocketMessageTypes
--- PASS: TestWebSocketMessageTypes (0.00s)
=== RUN   TestDefaultWebSocketConfig
--- PASS: TestDefaultWebSocketConfig (0.00s)
=== RUN   TestWebSocketConfig_CustomValues
--- PASS: TestWebSocketConfig_CustomValues (0.00s)
=== RUN   TestWebSocketMessage_AllFields
--- PASS: TestWebSocketMessage_AllFields (0.00s)
=== RUN   TestClient_ConcurrentOperations
--- PASS: TestClient_ConcurrentOperations (0.00s)
=== RUN   TestClient_Metadata
--- PASS: TestClient_Metadata (0.00s)
=== RUN   TestWebSocketConfig_PingPeriodLessThanPongWait
--- PASS: TestWebSocketConfig_PingPeriodLessThanPongWait (0.00s)
PASS
coverage: 51.2% of statements
ok  	helixtrack.ru/core/internal/models	1.081s	coverage: 51.2% of statements
=== RUN   TestLogSecurityEvent
--- PASS: TestLogSecurityEvent (0.00s)
=== RUN   TestDetermineSeverity
=== RUN   TestDetermineSeverity/IP_BLOCKED
=== RUN   TestDetermineSeverity/BRUTE_FORCE_DETECTED
=== RUN   TestDetermineSeverity/SQL_INJECTION
=== RUN   TestDetermineSeverity/XSS_ATTEMPT
=== RUN   TestDetermineSeverity/CSRF_DETECTED
=== RUN   TestDetermineSeverity/RATE_LIMIT_EXCEEDED
=== RUN   TestDetermineSeverity/SUSPICIOUS_ACTIVITY
=== RUN   TestDetermineSeverity/REQUEST_TOO_LARGE
=== RUN   TestDetermineSeverity/UNKNOWN_EVENT
--- PASS: TestDetermineSeverity (0.00s)
    --- PASS: TestDetermineSeverity/IP_BLOCKED (0.00s)
    --- PASS: TestDetermineSeverity/BRUTE_FORCE_DETECTED (0.00s)
    --- PASS: TestDetermineSeverity/SQL_INJECTION (0.00s)
    --- PASS: TestDetermineSeverity/XSS_ATTEMPT (0.00s)
    --- PASS: TestDetermineSeverity/CSRF_DETECTED (0.00s)
    --- PASS: TestDetermineSeverity/RATE_LIMIT_EXCEEDED (0.00s)
    --- PASS: TestDetermineSeverity/SUSPICIOUS_ACTIVITY (0.00s)
    --- PASS: TestDetermineSeverity/REQUEST_TOO_LARGE (0.00s)
    --- PASS: TestDetermineSeverity/UNKNOWN_EVENT (0.00s)
=== RUN   TestDetermineAction
=== RUN   TestDetermineAction/IP_BLOCKED
=== RUN   TestDetermineAction/REQUEST_BLOCKED
=== RUN   TestDetermineAction/SQL_INJECTION
=== RUN   TestDetermineAction/XSS_ATTEMPT
=== RUN   TestDetermineAction/SUSPICIOUS_ACTIVITY
=== RUN   TestDetermineAction/INVALID_INPUT
=== RUN   TestDetermineAction/UNKNOWN_EVENT
--- PASS: TestDetermineAction (0.00s)
    --- PASS: TestDetermineAction/IP_BLOCKED (0.00s)
    --- PASS: TestDetermineAction/REQUEST_BLOCKED (0.00s)
    --- PASS: TestDetermineAction/SQL_INJECTION (0.00s)
    --- PASS: TestDetermineAction/XSS_ATTEMPT (0.00s)
    --- PASS: TestDetermineAction/SUSPICIOUS_ACTIVITY (0.00s)
    --- PASS: TestDetermineAction/INVALID_INPUT (0.00s)
    --- PASS: TestDetermineAction/UNKNOWN_EVENT (0.00s)
=== RUN   TestGetRecentEvents
--- PASS: TestGetRecentEvents (0.00s)
=== RUN   TestGetEventsByIP
--- PASS: TestGetEventsByIP (0.00s)
=== RUN   TestGetEventsByType
[SECURITY CRITICAL] SQL_INJECTION from 192.168.1.1: SQL injection attempt
[SECURITY CRITICAL] XSS_ATTEMPT from 192.168.1.2: XSS attempt
[SECURITY CRITICAL] SQL_INJECTION from 192.168.1.3: SQL injection attempt 2
--- PASS: TestGetEventsByType (0.00s)
=== RUN   TestClearAuditLog
--- PASS: TestClearAuditLog (0.00s)
=== RUN   TestGetSecurityStatistics
[SECURITY CRITICAL] IP_BLOCKED from 192.168.1.1: Blocked
[SECURITY CRITICAL] SQL_INJECTION from 192.168.1.2: SQL
--- PASS: TestGetSecurityStatistics (0.00s)
=== RUN   TestRegisterCallback
==================
WARNING: DATA RACE
Read at 0x00c0000d00ef by goroutine 48:
  helixtrack.ru/core/internal/security.TestRegisterCallback()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/security/audit_log_test.go:181 +0x19a
  testing.tRunner()
      /usr/lib/go-1.22/src/testing/testing.go:1689 +0x21e
  testing.(*T).Run.gowrap1()
      /usr/lib/go-1.22/src/testing/testing.go:1742 +0x44

Previous write at 0x00c0000d00ef by goroutine 49:
  helixtrack.ru/core/internal/security.TestRegisterCallback.func1()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/security/audit_log_test.go:171 +0x37
  helixtrack.ru/core/internal/security.LogSecurityEvent.gowrap2()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/security/audit_log.go:59 +0xb4

Goroutine 48 (running) created at:
  testing.(*T).Run()
      /usr/lib/go-1.22/src/testing/testing.go:1742 +0x825
  testing.runTests.func1()
      /usr/lib/go-1.22/src/testing/testing.go:2161 +0x85
  testing.tRunner()
      /usr/lib/go-1.22/src/testing/testing.go:1689 +0x21e
  testing.runTests()
      /usr/lib/go-1.22/src/testing/testing.go:2159 +0x8be
  testing.(*M).Run()
      /usr/lib/go-1.22/src/testing/testing.go:2027 +0xf17
  main.main()
      _testmain.go:301 +0x2e4

Goroutine 49 (finished) created at:
  helixtrack.ru/core/internal/security.LogSecurityEvent()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/security/audit_log.go:59 +0x1064
  helixtrack.ru/core/internal/security.TestRegisterCallback()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/security/audit_log_test.go:176 +0x186
  testing.tRunner()
      /usr/lib/go-1.22/src/testing/testing.go:1689 +0x21e
  testing.(*T).Run.gowrap1()
      /usr/lib/go-1.22/src/testing/testing.go:1742 +0x44
==================
==================
WARNING: DATA RACE
Read at 0x00c0001a4018 by goroutine 48:
  helixtrack.ru/core/internal/security.TestRegisterCallback()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/security/audit_log_test.go:182 +0x1cb
  testing.tRunner()
      /usr/lib/go-1.22/src/testing/testing.go:1689 +0x21e
  testing.(*T).Run.gowrap1()
      /usr/lib/go-1.22/src/testing/testing.go:1742 +0x44

Previous write at 0x00c0001a4018 by goroutine 49:
  helixtrack.ru/core/internal/security.TestRegisterCallback.func1()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/security/audit_log_test.go:172 +0x4e
  helixtrack.ru/core/internal/security.LogSecurityEvent.gowrap2()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/security/audit_log.go:59 +0xb4

Goroutine 48 (running) created at:
  testing.(*T).Run()
      /usr/lib/go-1.22/src/testing/testing.go:1742 +0x825
  testing.runTests.func1()
      /usr/lib/go-1.22/src/testing/testing.go:2161 +0x85
  testing.tRunner()
      /usr/lib/go-1.22/src/testing/testing.go:1689 +0x21e
  testing.runTests()
      /usr/lib/go-1.22/src/testing/testing.go:2159 +0x8be
  testing.(*M).Run()
      /usr/lib/go-1.22/src/testing/testing.go:2027 +0xf17
  main.main()
      _testmain.go:301 +0x2e4

Goroutine 49 (finished) created at:
  helixtrack.ru/core/internal/security.LogSecurityEvent()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/security/audit_log.go:59 +0x1064
  helixtrack.ru/core/internal/security.TestRegisterCallback()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/security/audit_log_test.go:176 +0x186
  testing.tRunner()
      /usr/lib/go-1.22/src/testing/testing.go:1689 +0x21e
  testing.(*T).Run.gowrap1()
      /usr/lib/go-1.22/src/testing/testing.go:1742 +0x44
==================
==================
WARNING: DATA RACE
Read at 0x00c0001a4028 by goroutine 48:
  helixtrack.ru/core/internal/security.TestRegisterCallback()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/security/audit_log_test.go:183 +0x21c
  testing.tRunner()
      /usr/lib/go-1.22/src/testing/testing.go:1689 +0x21e
  testing.(*T).Run.gowrap1()
      /usr/lib/go-1.22/src/testing/testing.go:1742 +0x44

Previous write at 0x00c0001a4028 by goroutine 49:
  helixtrack.ru/core/internal/security.TestRegisterCallback.func1()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/security/audit_log_test.go:172 +0x4e
  helixtrack.ru/core/internal/security.LogSecurityEvent.gowrap2()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/security/audit_log.go:59 +0xb4

Goroutine 48 (running) created at:
  testing.(*T).Run()
      /usr/lib/go-1.22/src/testing/testing.go:1742 +0x825
  testing.runTests.func1()
      /usr/lib/go-1.22/src/testing/testing.go:2161 +0x85
  testing.tRunner()
      /usr/lib/go-1.22/src/testing/testing.go:1689 +0x21e
  testing.runTests()
      /usr/lib/go-1.22/src/testing/testing.go:2159 +0x8be
  testing.(*M).Run()
      /usr/lib/go-1.22/src/testing/testing.go:2027 +0xf17
  main.main()
      _testmain.go:301 +0x2e4

Goroutine 49 (finished) created at:
  helixtrack.ru/core/internal/security.LogSecurityEvent()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/security/audit_log.go:59 +0x1064
  helixtrack.ru/core/internal/security.TestRegisterCallback()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/security/audit_log_test.go:176 +0x186
  testing.tRunner()
      /usr/lib/go-1.22/src/testing/testing.go:1689 +0x21e
  testing.(*T).Run.gowrap1()
      /usr/lib/go-1.22/src/testing/testing.go:1742 +0x44
==================
    testing.go:1398: race detected during execution of test
--- FAIL: TestRegisterCallback (0.01s)
=== RUN   TestMaxEventsLimit
==================
WARNING: DATA RACE
Write at 0x00c0001a4000 by goroutine 52:
  helixtrack.ru/core/internal/security.TestRegisterCallback.func1()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/security/audit_log_test.go:172 +0x4e
  helixtrack.ru/core/internal/security.LogSecurityEvent.gowrap2()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/security/audit_log.go:59 +0xb4

Previous write at 0x00c0001a4000 by goroutine 49:
  helixtrack.ru/core/internal/security.TestRegisterCallback.func1()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/security/audit_log_test.go:172 +0x4e
  helixtrack.ru/core/internal/security.LogSecurityEvent.gowrap2()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/security/audit_log.go:59 +0xb4

Goroutine 52 (running) created at:
  helixtrack.ru/core/internal/security.LogSecurityEvent()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/security/audit_log.go:59 +0x1064
  helixtrack.ru/core/internal/security.TestMaxEventsLimit()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/security/audit_log_test.go:193 +0x59
  testing.tRunner()
      /usr/lib/go-1.22/src/testing/testing.go:1689 +0x21e
  testing.(*T).Run.gowrap1()
      /usr/lib/go-1.22/src/testing/testing.go:1742 +0x44

Goroutine 49 (finished) created at:
  helixtrack.ru/core/internal/security.LogSecurityEvent()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/security/audit_log.go:59 +0x1064
  helixtrack.ru/core/internal/security.TestRegisterCallback()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/security/audit_log_test.go:176 +0x186
  testing.tRunner()
      /usr/lib/go-1.22/src/testing/testing.go:1689 +0x21e
  testing.(*T).Run.gowrap1()
      /usr/lib/go-1.22/src/testing/testing.go:1742 +0x44
==================
==================
WARNING: DATA RACE
Write at 0x00c0000d00ef by goroutine 53:
  helixtrack.ru/core/internal/security.TestRegisterCallback.func1()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/security/audit_log_test.go:171 +0x37
  helixtrack.ru/core/internal/security.LogSecurityEvent.gowrap2()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/security/audit_log.go:59 +0xb4

Previous write at 0x00c0000d00ef by goroutine 52:
  helixtrack.ru/core/internal/security.TestRegisterCallback.func1()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/security/audit_log_test.go:171 +0x37
  helixtrack.ru/core/internal/security.LogSecurityEvent.gowrap2()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/security/audit_log.go:59 +0xb4

Goroutine 53 (running) created at:
  helixtrack.ru/core/internal/security.LogSecurityEvent()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/security/audit_log.go:59 +0x1064
  helixtrack.ru/core/internal/security.TestMaxEventsLimit()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/security/audit_log_test.go:193 +0x59
  testing.tRunner()
      /usr/lib/go-1.22/src/testing/testing.go:1689 +0x21e
  testing.(*T).Run.gowrap1()
      /usr/lib/go-1.22/src/testing/testing.go:1742 +0x44

Goroutine 52 (finished) created at:
  helixtrack.ru/core/internal/security.LogSecurityEvent()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/security/audit_log.go:59 +0x1064
  helixtrack.ru/core/internal/security.TestMaxEventsLimit()
      /home/milosvasic/Projects/HelixTrack/Core/Application/internal/security/audit_log_test.go:193 +0x59
  testing.tRunner()
      /usr/lib/go-1.22/src/testing/testing.go:1689 +0x21e
  testing.(*T).Run.gowrap1()
      /usr/lib/go-1.22/src/testing/testing.go:1742 +0x44
==================
    testing.go:1398: race detected during execution of test
--- FAIL: TestMaxEventsLimit (0.00s)
=== RUN   TestSecurityEventFields
[SECURITY CRITICAL] SQL_INJECTION from 192.168.1.1: Attempted SQL injection
--- PASS: TestSecurityEventFields (0.00s)
=== RUN   TestMultipleIPsStatistics
--- PASS: TestMultipleIPsStatistics (0.00s)
=== RUN   TestBruteForceProtectorCheckAttempt
--- PASS: TestBruteForceProtectorCheckAttempt (0.00s)
=== RUN   TestBruteForceProtectorRecordSuccess
--- PASS: TestBruteForceProtectorRecordSuccess (0.00s)
=== RUN   TestBruteForceProtectorWhitelist
--- PASS: TestBruteForceProtectorWhitelist (0.00s)
=== RUN   TestBruteForceProtectorProgressiveDelay
--- PASS: TestBruteForceProtectorProgressiveDelay (0.00s)
=== RUN   TestBruteForceProtectorBlockExpiry
--- PASS: TestBruteForceProtectorBlockExpiry (0.15s)
=== RUN   TestBruteForceProtectorPermanentBlock
--- PASS: TestBruteForceProtectorPermanentBlock (0.05s)
=== RUN   TestBruteForceProtectionMiddleware
[SECURITY CRITICAL] BRUTE_FORCE_DETECTED from 192.168.1.1: Brute force attempt blocked for username '': Temporarily blocked (IP) - 30m0s remaining
--- PASS: TestBruteForceProtectionMiddleware (1.00s)
=== RUN   TestRecordLoginFailure
--- PASS: TestRecordLoginFailure (0.00s)
=== RUN   TestRecordLoginSuccess
--- PASS: TestRecordLoginSuccess (0.00s)
=== RUN   TestUnblockIP
--- PASS: TestUnblockIP (0.00s)
=== RUN   TestUnblockUsername
--- PASS: TestUnblockUsername (0.00s)
=== RUN   TestBruteForceStatistics
--- PASS: TestBruteForceStatistics (0.00s)
=== RUN   TestCSRFTokenGeneration
--- PASS: TestCSRFTokenGeneration (0.00s)
=== RUN   TestCSRFTokenValidation
--- PASS: TestCSRFTokenValidation (0.00s)
=== RUN   TestCSRFTokenExpiration
--- PASS: TestCSRFTokenExpiration (0.15s)
=== RUN   TestCSRFTokenOneTimeUse
--- PASS: TestCSRFTokenOneTimeUse (0.00s)
=== RUN   TestCSRFProtectionMiddleware_GET
--- PASS: TestCSRFProtectionMiddleware_GET (0.00s)
=== RUN   TestCSRFProtectionMiddleware_POST_Valid
--- PASS: TestCSRFProtectionMiddleware_POST_Valid (0.00s)
=== RUN   TestCSRFProtectionMiddleware_POST_Invalid
[SECURITY CRITICAL] CSRF_DETECTED from 192.168.1.1: CSRF token validation failed for POST /submit
--- PASS: TestCSRFProtectionMiddleware_POST_Invalid (0.00s)
=== RUN   TestGetCSRFToken
--- PASS: TestGetCSRFToken (0.00s)
=== RUN   TestCSRFStatistics
--- PASS: TestCSRFStatistics (0.00s)
=== RUN   TestClearExpiredCSRFTokens
--- PASS: TestClearExpiredCSRFTokens (0.01s)
=== RUN   TestDDoSProtectionMiddleware
=== RUN   TestDDoSProtectionMiddleware/Under_rate_limit
=== RUN   TestDDoSProtectionMiddleware/Exceed_rate_limit
--- PASS: TestDDoSProtectionMiddleware (0.00s)
    --- PASS: TestDDoSProtectionMiddleware/Under_rate_limit (0.00s)
    --- PASS: TestDDoSProtectionMiddleware/Exceed_rate_limit (0.00s)
=== RUN   TestDDoSRequestSizeLimit
--- PASS: TestDDoSRequestSizeLimit (0.00s)
=== RUN   TestDDoSURILengthLimit
--- PASS: TestDDoSURILengthLimit (0.00s)
=== RUN   TestDDoSProtectorCheckRequest
--- PASS: TestDDoSProtectorCheckRequest (0.00s)
=== RUN   TestDDoSProtectorWhitelist
--- PASS: TestDDoSProtectorWhitelist (0.00s)
=== RUN   TestDDoSProtectorBlockIP
[SECURITY CRITICAL] IP_BLOCKED from 192.168.1.2: Test block
--- PASS: TestDDoSProtectorBlockIP (0.15s)
=== RUN   TestDDoSProtectorConcurrentLimit
--- PASS: TestDDoSProtectorConcurrentLimit (0.00s)
=== RUN   TestDDoSProtectorCleanup
--- PASS: TestDDoSProtectorCleanup (0.10s)
=== RUN   TestDDoSProtectorStatistics
[SECURITY CRITICAL] IP_BLOCKED from 192.168.1.100: Test
--- PASS: TestDDoSProtectorStatistics (0.00s)
=== RUN   TestExtractIPFromContext
=== RUN   TestExtractIPFromContext/Direct_IP
=== RUN   TestExtractIPFromContext/X-Forwarded-For
=== RUN   TestExtractIPFromContext/X-Real-IP
--- PASS: TestExtractIPFromContext (0.00s)
    --- PASS: TestExtractIPFromContext/Direct_IP (0.00s)
    --- PASS: TestExtractIPFromContext/X-Forwarded-For (0.00s)
    --- PASS: TestExtractIPFromContext/X-Real-IP (0.00s)
=== RUN   TestValidateString
=== RUN   TestValidateString/Valid_string
=== RUN   TestValidateString/SQL_injection_-_UNION_SELECT
=== RUN   TestValidateString/SQL_injection_-_DROP_TABLE
=== RUN   TestValidateString/SQL_injection_-_OR_1=1
=== RUN   TestValidateString/XSS_-_script_tag
=== RUN   TestValidateString/XSS_-_javascript_protocol
=== RUN   TestValidateString/XSS_-_onerror
=== RUN   TestValidateString/Path_traversal_-_../
=== RUN   TestValidateString/Path_traversal_-_URL_encoded
=== RUN   TestValidateString/Command_injection_-_semicolon
=== RUN   TestValidateString/Command_injection_-_pipe
=== RUN   TestValidateString/Command_injection_-_backticks
=== RUN   TestValidateString/LDAP_injection_-_wildcard
=== RUN   TestValidateString/String_too_long
--- PASS: TestValidateString (0.01s)
    --- PASS: TestValidateString/Valid_string (0.00s)
    --- PASS: TestValidateString/SQL_injection_-_UNION_SELECT (0.00s)
    --- PASS: TestValidateString/SQL_injection_-_DROP_TABLE (0.00s)
    --- PASS: TestValidateString/SQL_injection_-_OR_1=1 (0.00s)
    --- PASS: TestValidateString/XSS_-_script_tag (0.00s)
    --- PASS: TestValidateString/XSS_-_javascript_protocol (0.00s)
    --- PASS: TestValidateString/XSS_-_onerror (0.00s)
    --- PASS: TestValidateString/Path_traversal_-_../ (0.00s)
    --- PASS: TestValidateString/Path_traversal_-_URL_encoded (0.00s)
    --- PASS: TestValidateString/Command_injection_-_semicolon (0.00s)
    --- PASS: TestValidateString/Command_injection_-_pipe (0.00s)
    --- PASS: TestValidateString/Command_injection_-_backticks (0.00s)
    --- PASS: TestValidateString/LDAP_injection_-_wildcard (0.00s)
    --- PASS: TestValidateString/String_too_long (0.00s)
=== RUN   TestSQLInjectionPattern
=== RUN   TestSQLInjectionPattern/UNION_SELECT
=== RUN   TestSQLInjectionPattern/SELECT_FROM
=== RUN   TestSQLInjectionPattern/INSERT_INTO
=== RUN   TestSQLInjectionPattern/DELETE_FROM
=== RUN   TestSQLInjectionPattern/DROP_TABLE
=== RUN   TestSQLInjectionPattern/OR_1=1
=== RUN   TestSQLInjectionPattern/Normal_text
=== RUN   TestSQLInjectionPattern/Normal_query_without_keywords
--- PASS: TestSQLInjectionPattern (0.00s)
    --- PASS: TestSQLInjectionPattern/UNION_SELECT (0.00s)
    --- PASS: TestSQLInjectionPattern/SELECT_FROM (0.00s)
    --- PASS: TestSQLInjectionPattern/INSERT_INTO (0.00s)
    --- PASS: TestSQLInjectionPattern/DELETE_FROM (0.00s)
    --- PASS: TestSQLInjectionPattern/DROP_TABLE (0.00s)
    --- PASS: TestSQLInjectionPattern/OR_1=1 (0.00s)
    --- PASS: TestSQLInjectionPattern/Normal_text (0.00s)
    --- PASS: TestSQLInjectionPattern/Normal_query_without_keywords (0.00s)
=== RUN   TestXSSPattern
=== RUN   TestXSSPattern/script_tag
=== RUN   TestXSSPattern/javascript_protocol
=== RUN   TestXSSPattern/onerror
=== RUN   TestXSSPattern/onload
=== RUN   TestXSSPattern/iframe
=== RUN   TestXSSPattern/eval
=== RUN   TestXSSPattern/Normal_HTML
=== RUN   TestXSSPattern/Normal_text
--- PASS: TestXSSPattern (0.00s)
    --- PASS: TestXSSPattern/script_tag (0.00s)
    --- PASS: TestXSSPattern/javascript_protocol (0.00s)
    --- PASS: TestXSSPattern/onerror (0.00s)
    --- PASS: TestXSSPattern/onload (0.00s)
    --- PASS: TestXSSPattern/iframe (0.00s)
    --- PASS: TestXSSPattern/eval (0.00s)
    --- PASS: TestXSSPattern/Normal_HTML (0.00s)
    --- PASS: TestXSSPattern/Normal_text (0.00s)
=== RUN   TestPathTraversalPattern
=== RUN   TestPathTraversalPattern/Unix_path_traversal
=== RUN   TestPathTraversalPattern/Windows_path_traversal
=== RUN   TestPathTraversalPattern/URL_encoded
=== RUN   TestPathTraversalPattern/Normal_path
=== RUN   TestPathTraversalPattern/Normal_text
--- PASS: TestPathTraversalPattern (0.00s)
    --- PASS: TestPathTraversalPattern/Unix_path_traversal (0.00s)
    --- PASS: TestPathTraversalPattern/Windows_path_traversal (0.00s)
    --- PASS: TestPathTraversalPattern/URL_encoded (0.00s)
    --- PASS: TestPathTraversalPattern/Normal_path (0.00s)
    --- PASS: TestPathTraversalPattern/Normal_text (0.00s)
=== RUN   TestSanitizeInput
=== RUN   TestSanitizeInput/HTML_characters
=== RUN   TestSanitizeInput/Null_bytes
=== RUN   TestSanitizeInput/Whitespace
--- PASS: TestSanitizeInput (0.00s)
    --- PASS: TestSanitizeInput/HTML_characters (0.00s)
    --- PASS: TestSanitizeInput/Null_bytes (0.00s)
    --- PASS: TestSanitizeInput/Whitespace (0.00s)
=== RUN   TestSanitizeFilename
=== RUN   TestSanitizeFilename/Path_separators
=== RUN   TestSanitizeFilename/Windows_path
=== RUN   TestSanitizeFilename/Dangerous_characters
=== RUN   TestSanitizeFilename/Normal_filename
--- PASS: TestSanitizeFilename (0.00s)
    --- PASS: TestSanitizeFilename/Path_separators (0.00s)
    --- PASS: TestSanitizeFilename/Windows_path (0.00s)
    --- PASS: TestSanitizeFilename/Dangerous_characters (0.00s)
    --- PASS: TestSanitizeFilename/Normal_filename (0.00s)
=== RUN   TestSanitizeURL
=== RUN   TestSanitizeURL/Valid_HTTP_URL
=== RUN   TestSanitizeURL/Valid_HTTPS_URL
=== RUN   TestSanitizeURL/JavaScript_protocol
=== RUN   TestSanitizeURL/Data_protocol
=== RUN   TestSanitizeURL/FTP_protocol
--- PASS: TestSanitizeURL (0.00s)
    --- PASS: TestSanitizeURL/Valid_HTTP_URL (0.00s)
    --- PASS: TestSanitizeURL/Valid_HTTPS_URL (0.00s)
    --- PASS: TestSanitizeURL/JavaScript_protocol (0.00s)
    --- PASS: TestSanitizeURL/Data_protocol (0.00s)
    --- PASS: TestSanitizeURL/FTP_protocol (0.00s)
=== RUN   TestValidateEmail
=== RUN   TestValidateEmail/Valid_email
=== RUN   TestValidateEmail/Valid_email_with_plus
=== RUN   TestValidateEmail/Valid_email_with_subdomain
=== RUN   TestValidateEmail/Invalid_-_no_@
=== RUN   TestValidateEmail/Invalid_-_no_domain
=== RUN   TestValidateEmail/Invalid_-_no_TLD
=== RUN   TestValidateEmail/Invalid_-_spaces
--- PASS: TestValidateEmail (0.00s)
    --- PASS: TestValidateEmail/Valid_email (0.00s)
    --- PASS: TestValidateEmail/Valid_email_with_plus (0.00s)
    --- PASS: TestValidateEmail/Valid_email_with_subdomain (0.00s)
    --- PASS: TestValidateEmail/Invalid_-_no_@ (0.00s)
    --- PASS: TestValidateEmail/Invalid_-_no_domain (0.00s)
    --- PASS: TestValidateEmail/Invalid_-_no_TLD (0.00s)
    --- PASS: TestValidateEmail/Invalid_-_spaces (0.00s)
=== RUN   TestValidateUsername
=== RUN   TestValidateUsername/Valid_username
=== RUN   TestValidateUsername/Valid_with_underscore
=== RUN   TestValidateUsername/Too_short
=== RUN   TestValidateUsername/Too_long
=== RUN   TestValidateUsername/Invalid_characters_-_space
=== RUN   TestValidateUsername/Invalid_characters_-_special
--- PASS: TestValidateUsername (0.00s)
    --- PASS: TestValidateUsername/Valid_username (0.00s)
    --- PASS: TestValidateUsername/Valid_with_underscore (0.00s)
    --- PASS: TestValidateUsername/Too_short (0.00s)
    --- PASS: TestValidateUsername/Too_long (0.00s)
    --- PASS: TestValidateUsername/Invalid_characters_-_space (0.00s)
    --- PASS: TestValidateUsername/Invalid_characters_-_special (0.00s)
=== RUN   TestValidatePassword
=== RUN   TestValidatePassword/Valid_password
=== RUN   TestValidatePassword/Valid_complex
=== RUN   TestValidatePassword/Too_short
=== RUN   TestValidatePassword/No_uppercase
=== RUN   TestValidatePassword/No_lowercase
=== RUN   TestValidatePassword/No_digit
=== RUN   TestValidatePassword/No_special_char
--- PASS: TestValidatePassword (0.00s)
    --- PASS: TestValidatePassword/Valid_password (0.00s)
    --- PASS: TestValidatePassword/Valid_complex (0.00s)
    --- PASS: TestValidatePassword/Too_short (0.00s)
    --- PASS: TestValidatePassword/No_uppercase (0.00s)
    --- PASS: TestValidatePassword/No_lowercase (0.00s)
    --- PASS: TestValidatePassword/No_digit (0.00s)
    --- PASS: TestValidatePassword/No_special_char (0.00s)
=== RUN   TestInputValidationMiddleware
=== RUN   TestInputValidationMiddleware/Valid_query_parameters
=== RUN   TestInputValidationMiddleware/SQL_injection_in_query
=== RUN   TestInputValidationMiddleware/XSS_in_query
--- PASS: TestInputValidationMiddleware (0.00s)
    --- PASS: TestInputValidationMiddleware/Valid_query_parameters (0.00s)
    --- PASS: TestInputValidationMiddleware/SQL_injection_in_query (0.00s)
    --- PASS: TestInputValidationMiddleware/XSS_in_query (0.00s)
=== RUN   TestSecurityHeadersMiddleware
--- PASS: TestSecurityHeadersMiddleware (0.00s)
=== RUN   TestSecurityHeadersMiddleware_HSTS
--- PASS: TestSecurityHeadersMiddleware_HSTS (0.00s)
=== RUN   TestBuildCSP
--- PASS: TestBuildCSP (0.00s)
=== RUN   TestBuildPermissionsPolicy
--- PASS: TestBuildPermissionsPolicy (0.00s)
=== RUN   TestSecureRedirect
--- PASS: TestSecureRedirect (0.00s)
=== RUN   TestTLSVersionMiddleware
--- PASS: TestTLSVersionMiddleware (0.00s)
=== RUN   TestGetSecurityHeaders
--- PASS: TestGetSecurityHeaders (0.00s)
=== RUN   TestGetSecurityHeadersInfo
--- PASS: TestGetSecurityHeadersInfo (0.00s)
=== RUN   TestDefaultSecurityHeadersChecker
--- PASS: TestDefaultSecurityHeadersChecker (0.00s)
=== RUN   TestSecurityHeadersChecker_Forbidden
--- PASS: TestSecurityHeadersChecker_Forbidden (0.00s)
=== RUN   TestStrictSecurityHeadersConfig
--- PASS: TestStrictSecurityHeadersConfig (0.00s)
=== RUN   TestRelaxedSecurityHeadersConfig
--- PASS: TestRelaxedSecurityHeadersConfig (0.00s)
=== RUN   TestCSPReportHandler
--- PASS: TestCSPReportHandler (0.00s)
=== RUN   TestNewServiceSigner
=== RUN   TestNewServiceSigner/Successful_creation
--- PASS: TestNewServiceSigner (0.18s)
    --- PASS: TestNewServiceSigner/Successful_creation (0.18s)
=== RUN   TestServiceSigner_SignAndVerifyServiceRegistration
=== RUN   TestServiceSigner_SignAndVerifyServiceRegistration/Sign_service_registration
=== RUN   TestServiceSigner_SignAndVerifyServiceRegistration/Verify_valid_signature
=== RUN   TestServiceSigner_SignAndVerifyServiceRegistration/Reject_tampered_service
=== RUN   TestServiceSigner_SignAndVerifyServiceRegistration/Reject_invalid_public_key_format
=== RUN   TestServiceSigner_SignAndVerifyServiceRegistration/Reject_invalid_signature_format
--- PASS: TestServiceSigner_SignAndVerifyServiceRegistration (0.09s)
    --- PASS: TestServiceSigner_SignAndVerifyServiceRegistration/Sign_service_registration (0.01s)
    --- PASS: TestServiceSigner_SignAndVerifyServiceRegistration/Verify_valid_signature (0.00s)
    --- PASS: TestServiceSigner_SignAndVerifyServiceRegistration/Reject_tampered_service (0.00s)
    --- PASS: TestServiceSigner_SignAndVerifyServiceRegistration/Reject_invalid_public_key_format (0.00s)
    --- PASS: TestServiceSigner_SignAndVerifyServiceRegistration/Reject_invalid_signature_format (0.00s)
=== RUN   TestServiceSigner_VerifyServiceRotation
=== RUN   TestServiceSigner_VerifyServiceRotation/Successful_rotation_with_valid_admin_token
=== RUN   TestServiceSigner_VerifyServiceRotation/Reject_rotation_with_short_admin_token
=== RUN   TestServiceSigner_VerifyServiceRotation/Reject_rotation_when_old_service_is_rotating
=== RUN   TestServiceSigner_VerifyServiceRotation/Reject_rotation_when_old_service_is_decommissioned
=== RUN   TestServiceSigner_VerifyServiceRotation/Reject_rotation_with_invalid_new_service_signature
=== RUN   TestServiceSigner_VerifyServiceRotation/Reject_rotation_with_mismatched_service_types
=== RUN   TestServiceSigner_VerifyServiceRotation/Reject_rotation_when_new_service_is_not_healthy
=== RUN   TestServiceSigner_VerifyServiceRotation/Reject_rotation_when_service_registered_too_recently
--- PASS: TestServiceSigner_VerifyServiceRotation (0.40s)
    --- PASS: TestServiceSigner_VerifyServiceRotation/Successful_rotation_with_valid_admin_token (0.00s)
    --- PASS: TestServiceSigner_VerifyServiceRotation/Reject_rotation_with_short_admin_token (0.00s)
    --- PASS: TestServiceSigner_VerifyServiceRotation/Reject_rotation_when_old_service_is_rotating (0.00s)
    --- PASS: TestServiceSigner_VerifyServiceRotation/Reject_rotation_when_old_service_is_decommissioned (0.00s)
    --- PASS: TestServiceSigner_VerifyServiceRotation/Reject_rotation_with_invalid_new_service_signature (0.00s)
    --- PASS: TestServiceSigner_VerifyServiceRotation/Reject_rotation_with_mismatched_service_types (0.01s)
    --- PASS: TestServiceSigner_VerifyServiceRotation/Reject_rotation_when_new_service_is_not_healthy (0.01s)
    --- PASS: TestServiceSigner_VerifyServiceRotation/Reject_rotation_when_service_registered_too_recently (0.01s)
=== RUN   TestGenerateRotationCode
=== RUN   TestGenerateRotationCode/Generate_valid_rotation_code
=== RUN   TestGenerateRotationCode/Different_services_generate_different_codes
=== RUN   TestGenerateRotationCode/Different_secrets_generate_different_codes
=== RUN   TestGenerateRotationCode/Verify_rotation_code
--- PASS: TestGenerateRotationCode (0.00s)
    --- PASS: TestGenerateRotationCode/Generate_valid_rotation_code (0.00s)
    --- PASS: TestGenerateRotationCode/Different_services_generate_different_codes (0.00s)
    --- PASS: TestGenerateRotationCode/Different_secrets_generate_different_codes (0.00s)
    --- PASS: TestGenerateRotationCode/Verify_rotation_code (0.00s)
=== RUN   TestServiceSigner_GetKeys
=== RUN   TestServiceSigner_GetKeys/Get_public_key_PEM
=== RUN   TestServiceSigner_GetKeys/Get_private_key_PEM
--- PASS: TestServiceSigner_GetKeys (0.26s)
    --- PASS: TestServiceSigner_GetKeys/Get_public_key_PEM (0.00s)
    --- PASS: TestServiceSigner_GetKeys/Get_private_key_PEM (0.00s)
=== RUN   TestServiceSigner_MultipleSigners
=== RUN   TestServiceSigner_MultipleSigners/Service_with_swapped_public_key_fails_verification
--- PASS: TestServiceSigner_MultipleSigners (0.42s)
    --- PASS: TestServiceSigner_MultipleSigners/Service_with_swapped_public_key_fails_verification (0.42s)
=== RUN   TestGenerateAdminToken
=== RUN   TestGenerateAdminToken/Generate_admin_token
=== RUN   TestGenerateAdminToken/Different_users_generate_different_tokens
=== RUN   TestGenerateAdminToken/Different_secrets_generate_different_tokens
--- PASS: TestGenerateAdminToken (0.00s)
    --- PASS: TestGenerateAdminToken/Generate_admin_token (0.00s)
    --- PASS: TestGenerateAdminToken/Different_users_generate_different_tokens (0.00s)
    --- PASS: TestGenerateAdminToken/Different_secrets_generate_different_tokens (0.00s)
=== RUN   TestServiceSigner_EdgeCases
=== RUN   TestServiceSigner_EdgeCases/Sign_service_with_empty_fields
=== RUN   TestServiceSigner_EdgeCases/Sign_service_with_special_characters
--- PASS: TestServiceSigner_EdgeCases (0.16s)
    --- PASS: TestServiceSigner_EdgeCases/Sign_service_with_empty_fields (0.01s)
    --- PASS: TestServiceSigner_EdgeCases/Sign_service_with_special_characters (0.01s)
=== RUN   TestDefaultTLSConfig
--- PASS: TestDefaultTLSConfig (0.00s)
=== RUN   TestStrictTLSConfig
--- PASS: TestStrictTLSConfig (0.00s)
=== RUN   TestGetSecureCipherSuites
--- PASS: TestGetSecureCipherSuites (0.00s)
=== RUN   TestGetWeakCipherSuites
--- PASS: TestGetWeakCipherSuites (0.00s)
=== RUN   TestCreateTLSConfig
--- PASS: TestCreateTLSConfig (0.00s)
=== RUN   TestTLSEnforcementMiddleware_HTTPS
--- PASS: TestTLSEnforcementMiddleware_HTTPS (0.00s)
=== RUN   TestTLSEnforcementMiddleware_HTTP_Redirect
--- PASS: TestTLSEnforcementMiddleware_HTTP_Redirect (0.00s)
=== RUN   TestTLSEnforcementMiddleware_LowVersion
--- PASS: TestTLSEnforcementMiddleware_LowVersion (0.00s)
=== RUN   TestTLSEnforcementMiddleware_WeakCipher
--- PASS: TestTLSEnforcementMiddleware_WeakCipher (0.00s)
=== RUN   TestMutualTLSMiddleware_NoCert
--- PASS: TestMutualTLSMiddleware_NoCert (0.00s)
=== RUN   TestGetTLSVersionInfo
--- PASS: TestGetTLSVersionInfo (0.00s)
=== RUN   TestGetTLSVersionInfo_NoTLS
--- PASS: TestGetTLSVersionInfo_NoTLS (0.00s)
=== RUN   TestGetTLSVersionName
=== RUN   TestGetTLSVersionName/TLS_1.0
=== RUN   TestGetTLSVersionName/TLS_1.1
=== RUN   TestGetTLSVersionName/TLS_1.2
=== RUN   TestGetTLSVersionName/TLS_1.3
=== RUN   TestGetTLSVersionName/Unknown_(0x9999)
--- PASS: TestGetTLSVersionName (0.00s)
    --- PASS: TestGetTLSVersionName/TLS_1.0 (0.00s)
    --- PASS: TestGetTLSVersionName/TLS_1.1 (0.00s)
    --- PASS: TestGetTLSVersionName/TLS_1.2 (0.00s)
    --- PASS: TestGetTLSVersionName/TLS_1.3 (0.00s)
    --- PASS: TestGetTLSVersionName/Unknown_(0x9999) (0.00s)
=== RUN   TestGetCipherSuiteName
=== RUN   TestGetCipherSuiteName/TLS_AES_128_GCM_SHA256
=== RUN   TestGetCipherSuiteName/TLS_AES_256_GCM_SHA384
=== RUN   TestGetCipherSuiteName/TLS_CHACHA20_POLY1305_SHA256
=== RUN   TestGetCipherSuiteName/TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
=== RUN   TestGetCipherSuiteName/TLS_RSA_WITH_RC4_128_SHA_(WEAK)
--- PASS: TestGetCipherSuiteName (0.00s)
    --- PASS: TestGetCipherSuiteName/TLS_AES_128_GCM_SHA256 (0.00s)
    --- PASS: TestGetCipherSuiteName/TLS_AES_256_GCM_SHA384 (0.00s)
    --- PASS: TestGetCipherSuiteName/TLS_CHACHA20_POLY1305_SHA256 (0.00s)
    --- PASS: TestGetCipherSuiteName/TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256 (0.00s)
    --- PASS: TestGetCipherSuiteName/TLS_RSA_WITH_RC4_128_SHA_(WEAK) (0.00s)
=== RUN   TestValidateTLSConfig
--- PASS: TestValidateTLSConfig (0.00s)
=== RUN   TestRequireHTTPSMiddleware
--- PASS: TestRequireHTTPSMiddleware (0.00s)
=== RUN   TestTLSAuditMiddleware
--- PASS: TestTLSAuditMiddleware (0.00s)
FAIL
coverage: 78.0% of statements
FAIL	helixtrack.ru/core/internal/security	3.226s
=== RUN   TestNewServer
2025-10-16T20:36:27.498+0300	ERROR	logger/logger.go:131	Failed to query services for health check	{"error": "sql: database is closed"}
helixtrack.ru/core/internal/logger.Error
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/logger/logger.go:131
helixtrack.ru/core/internal/services.(*HealthChecker).checkAllServices
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/services/health_checker.go:122
helixtrack.ru/core/internal/services.(*HealthChecker).checkLoop
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/services/health_checker.go:97
--- PASS: TestNewServer (3.27s)
=== RUN   TestServer_HealthEndpoint
--- PASS: TestServer_HealthEndpoint (3.30s)
=== RUN   TestServer_DoEndpoint_Version
--- PASS: TestServer_DoEndpoint_Version (3.54s)
=== RUN   TestServer_DoEndpoint_MissingJWT
--- PASS: TestServer_DoEndpoint_MissingJWT (3.75s)
=== RUN   TestServer_DoEndpoint_InvalidJSON
2025-10-16T20:36:41.411+0300	ERROR	logger/logger.go:131	Failed to bind JSON request	{"error": "invalid character 'i' looking for beginning of object key string", "error_details": "invalid character 'i' looking for beginning of object key string", "body": "{invalid json}"}
helixtrack.ru/core/internal/logger.Error
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/logger/logger.go:131
helixtrack.ru/core/internal/server.(*Server).setupRouter.func1
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/server/server.go:194
github.com/gin-gonic/gin.(*Context).Next
	/home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185
helixtrack.ru/core/internal/server.(*Server).setupRouter.(*Server).corsMiddleware.func4
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/server/server.go:304
github.com/gin-gonic/gin.(*Context).Next
	/home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185
helixtrack.ru/core/internal/server.(*Server).setupRouter.(*Server).loggingMiddleware.func3
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/server/server.go:277
github.com/gin-gonic/gin.(*Context).Next
	/home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185
github.com/gin-gonic/gin.CustomRecoveryWithWriter.func1
	/home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102
github.com/gin-gonic/gin.(*Context).Next
	/home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185
github.com/gin-gonic/gin.(*Engine).handleHTTPRequest
	/home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633
github.com/gin-gonic/gin.(*Engine).ServeHTTP
	/home/milosvasic/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589
helixtrack.ru/core/internal/server.TestServer_DoEndpoint_InvalidJSON
	/home/milosvasic/Projects/HelixTrack/Core/Application/internal/server/server_test.go:226
testing.tRunner
	/usr/lib/go-1.22/src/testing/testing.go:1689
--- PASS: TestServer_DoEndpoint_InvalidJSON (3.33s)
=== RUN   TestServer_CORSMiddleware
--- PASS: TestServer_CORSMiddleware (3.23s)
=== RUN   TestServer_Shutdown
--- PASS: TestServer_Shutdown (3.40s)
=== RUN   TestServer_GetRouter
--- PASS: TestServer_GetRouter (3.46s)
PASS
coverage: 67.5% of statements
ok  	helixtrack.ru/core/internal/server	28.323s	coverage: 67.5% of statements
=== RUN   TestNewAuthService
--- PASS: TestNewAuthService (0.00s)
=== RUN   TestAuthService_IsEnabled
=== RUN   TestAuthService_IsEnabled/Enabled_service
=== RUN   TestAuthService_IsEnabled/Disabled_service
--- PASS: TestAuthService_IsEnabled (0.00s)
    --- PASS: TestAuthService_IsEnabled/Enabled_service (0.00s)
    --- PASS: TestAuthService_IsEnabled/Disabled_service (0.00s)
=== RUN   TestAuthService_Authenticate_Success
--- PASS: TestAuthService_Authenticate_Success (0.00s)
=== RUN   TestAuthService_Authenticate_Disabled
--- PASS: TestAuthService_Authenticate_Disabled (0.00s)
=== RUN   TestAuthService_Authenticate_InvalidCredentials
--- PASS: TestAuthService_Authenticate_InvalidCredentials (0.00s)
=== RUN   TestAuthService_Authenticate_ServerError
--- PASS: TestAuthService_Authenticate_ServerError (0.00s)
=== RUN   TestAuthService_Authenticate_InvalidResponse
--- PASS: TestAuthService_Authenticate_InvalidResponse (0.00s)
=== RUN   TestAuthService_Authenticate_Timeout
--- PASS: TestAuthService_Authenticate_Timeout (2.00s)
=== RUN   TestAuthService_ValidateToken_Success
--- PASS: TestAuthService_ValidateToken_Success (0.00s)
=== RUN   TestAuthService_ValidateToken_Disabled
--- PASS: TestAuthService_ValidateToken_Disabled (0.00s)
=== RUN   TestAuthService_ValidateToken_Invalid
--- PASS: TestAuthService_ValidateToken_Invalid (0.00s)
=== RUN   TestAuthService_ValidateToken_InvalidResponse
--- PASS: TestAuthService_ValidateToken_InvalidResponse (0.00s)
=== RUN   TestMockAuthService_Authenticate
--- PASS: TestMockAuthService_Authenticate (0.00s)
=== RUN   TestMockAuthService_ValidateToken
--- PASS: TestMockAuthService_ValidateToken (0.00s)
=== RUN   TestMockAuthService_IsEnabled
--- PASS: TestMockAuthService_IsEnabled (0.00s)
=== RUN   TestMockAuthService_Defaults
--- PASS: TestMockAuthService_Defaults (0.00s)
=== RUN   TestNewFailoverManager
=== RUN   TestNewFailoverManager/Create_failover_manager
--- PASS: TestNewFailoverManager (0.00s)
    --- PASS: TestNewFailoverManager/Create_failover_manager (0.00s)
=== RUN   TestFailoverManager_CheckFailoverNeeded
    failover_manager_test.go:27: TODO: Convert to integration test - uses QueryRow which requires real database
--- SKIP: TestFailoverManager_CheckFailoverNeeded (0.00s)
=== RUN   TestFailoverManager_ExecuteFailover
    failover_manager_test.go:372: TODO: Convert to integration test - uses QueryRow which requires real database
--- SKIP: TestFailoverManager_ExecuteFailover (0.00s)
=== RUN   TestFailoverManager_ExecuteFailback
    failover_manager_test.go:504: TODO: Convert to integration test - uses QueryRow which requires real database
--- SKIP: TestFailoverManager_ExecuteFailback (0.00s)
=== RUN   TestFailoverManager_GetFailoverHistory
    failover_manager_test.go:616: TODO: Convert to integration test with real database - Query() returns *sql.Rows which can't be mocked
--- SKIP: TestFailoverManager_GetFailoverHistory (0.00s)
=== RUN   TestFailoverManager_GetActiveService
    failover_manager_test.go:622: TODO: Convert to integration test - uses QueryRow which requires real database
--- SKIP: TestFailoverManager_GetActiveService (0.00s)
=== RUN   TestNewHealthChecker
=== RUN   TestNewHealthChecker/Create_health_checker_with_valid_parameters
--- PASS: TestNewHealthChecker (0.00s)
    --- PASS: TestNewHealthChecker/Create_health_checker_with_valid_parameters (0.00s)
=== RUN   TestHealthChecker_StartStop
=== RUN   TestHealthChecker_StartStop/Start_health_checker
{"level":"info","ts":1760636186.2166977,"caller":"logger/logger.go:121","msg":"Starting service health checker","interval":0.1}
=== RUN   TestHealthChecker_StartStop/Cannot_start_already_running_checker
{"level":"error","ts":1760636186.2168422,"caller":"logger/logger.go:131","msg":"Failed to query services for health check","error":"Query() not mockable - use real database for integration tests","stacktrace":"helixtrack.ru/core/internal/logger.Error\n\t/home/milosvasic/Projects/HelixTrack/Core/Application/internal/logger/logger.go:131\nhelixtrack.ru/core/internal/services.(*HealthChecker).checkAllServices\n\t/home/milosvasic/Projects/HelixTrack/Core/Application/internal/services/health_checker.go:122\nhelixtrack.ru/core/internal/services.(*HealthChecker).checkLoop\n\t/home/milosvasic/Projects/HelixTrack/Core/Application/internal/services/health_checker.go:97"}
=== RUN   TestHealthChecker_StartStop/Stop_health_checker
{"level":"info","ts":1760636186.2169676,"caller":"logger/logger.go:121","msg":"Service health checker stopped"}
=== RUN   TestHealthChecker_StartStop/Stop_non-running_checker_is_safe
--- PASS: TestHealthChecker_StartStop (0.00s)
    --- PASS: TestHealthChecker_StartStop/Start_health_checker (0.00s)
    --- PASS: TestHealthChecker_StartStop/Cannot_start_already_running_checker (0.00s)
    --- PASS: TestHealthChecker_StartStop/Stop_health_checker (0.00s)
    --- PASS: TestHealthChecker_StartStop/Stop_non-running_checker_is_safe (0.00s)
=== RUN   TestHealthChecker_CheckService
=== RUN   TestHealthChecker_CheckService/Successful_health_check
    health_checker_test.go:228: Requires database integration - QueryRow cannot be mocked
=== RUN   TestHealthChecker_CheckService/Failed_health_check_-_unhealthy_status_code
    health_checker_test.go:237: Requires database integration - QueryRow cannot be mocked
=== RUN   TestHealthChecker_CheckService/Failed_health_check_-_timeout
    health_checker_test.go:242: Requires database integration - QueryRow cannot be mocked
=== RUN   TestHealthChecker_CheckService/Healthy_status_resets_failure_count
    health_checker_test.go:247: Requires database integration - QueryRow cannot be mocked
--- PASS: TestHealthChecker_CheckService (0.00s)
    --- SKIP: TestHealthChecker_CheckService/Successful_health_check (0.00s)
    --- SKIP: TestHealthChecker_CheckService/Failed_health_check_-_unhealthy_status_code (0.00s)
    --- SKIP: TestHealthChecker_CheckService/Failed_health_check_-_timeout (0.00s)
    --- SKIP: TestHealthChecker_CheckService/Healthy_status_resets_failure_count (0.00s)
=== RUN   TestHealthChecker_CheckServiceNow
=== RUN   TestHealthChecker_CheckServiceNow/Successful_immediate_check
    health_checker_test.go:259: Requires database integration - QueryRow cannot be mocked
=== RUN   TestHealthChecker_CheckServiceNow/Service_not_found
    health_checker_test.go:264: Requires database integration - QueryRow cannot be mocked
--- PASS: TestHealthChecker_CheckServiceNow (0.00s)
    --- SKIP: TestHealthChecker_CheckServiceNow/Successful_immediate_check (0.00s)
    --- SKIP: TestHealthChecker_CheckServiceNow/Service_not_found (0.00s)
=== RUN   TestHealthChecker_GetServiceHealthHistory
=== RUN   TestHealthChecker_GetServiceHealthHistory/Retrieve_health_history
    health_checker_test.go:271: Requires database integration - Query cannot be mocked
=== RUN   TestHealthChecker_GetServiceHealthHistory/Query_error
--- PASS: TestHealthChecker_GetServiceHealthHistory (0.00s)
    --- SKIP: TestHealthChecker_GetServiceHealthHistory/Retrieve_health_history (0.00s)
    --- PASS: TestHealthChecker_GetServiceHealthHistory/Query_error (0.00s)
=== RUN   TestHealthChecker_FailoverIntegration
=== RUN   TestHealthChecker_FailoverIntegration/Failover_triggered_on_unhealthy_service
    health_checker_test.go:291: Requires database integration - QueryRow cannot be mocked
--- PASS: TestHealthChecker_FailoverIntegration (0.00s)
    --- SKIP: TestHealthChecker_FailoverIntegration/Failover_triggered_on_unhealthy_service (0.00s)
=== RUN   TestHealthChecker_ConcurrentHealthChecks
=== RUN   TestHealthChecker_ConcurrentHealthChecks/Multiple_services_checked_in_parallel
    health_checker_test.go:298: Requires database integration - Query cannot be mocked
--- PASS: TestHealthChecker_ConcurrentHealthChecks (0.00s)
    --- SKIP: TestHealthChecker_ConcurrentHealthChecks/Multiple_services_checked_in_parallel (0.00s)
=== RUN   TestNewNetworkDiscoveryService
--- PASS: TestNewNetworkDiscoveryService (0.00s)
=== RUN   TestNetworkDiscoveryService_StartStop
{"level":"info","ts":1760636186.218594,"caller":"logger/logger.go:121","msg":"Starting network discovery service","host":"localhost","port":8080}
{"level":"info","ts":1760636186.2186909,"caller":"logger/logger.go:121","msg":"Network discovery service started successfully"}
{"level":"info","ts":1760636186.2187304,"caller":"logger/logger.go:121","msg":"Stopping network discovery service"}
{"level":"info","ts":1760636186.2187557,"caller":"logger/logger.go:121","msg":"Network discovery service stopped"}
--- PASS: TestNetworkDiscoveryService_StartStop (0.00s)
=== RUN   TestNetworkDiscoveryService_DiscoverServices
{"level":"info","ts":1760636186.2188563,"caller":"logger/logger.go:121","msg":"Starting network discovery service","host":"localhost","port":8080}
{"level":"info","ts":1760636186.2189105,"caller":"logger/logger.go:121","msg":"Network discovery service started successfully"}
{"level":"info","ts":1760636187.3204663,"caller":"logger/logger.go:121","msg":"Stopping network discovery service"}
{"level":"info","ts":1760636187.3205485,"caller":"logger/logger.go:121","msg":"Network discovery service stopped"}
--- PASS: TestNetworkDiscoveryService_DiscoverServices (1.10s)
=== RUN   TestNetworkDiscoveryService_Getters
--- PASS: TestNetworkDiscoveryService_Getters (0.00s)
=== RUN   TestNewPermissionService
--- PASS: TestNewPermissionService (0.00s)
=== RUN   TestNewLocalPermissionService
--- PASS: TestNewLocalPermissionService (0.00s)
=== RUN   TestHttpPermissionService_IsEnabled
=== RUN   TestHttpPermissionService_IsEnabled/Service_enabled
=== RUN   TestHttpPermissionService_IsEnabled/Service_disabled
--- PASS: TestHttpPermissionService_IsEnabled (0.00s)
    --- PASS: TestHttpPermissionService_IsEnabled/Service_enabled (0.00s)
    --- PASS: TestHttpPermissionService_IsEnabled/Service_disabled (0.00s)
=== RUN   TestHttpPermissionService_CheckPermission_Disabled
--- PASS: TestHttpPermissionService_CheckPermission_Disabled (0.00s)
=== RUN   TestHttpPermissionService_CheckPermission_Success
=== RUN   TestHttpPermissionService_CheckPermission_Success/Permission_granted
=== RUN   TestHttpPermissionService_CheckPermission_Success/Permission_denied
--- PASS: TestHttpPermissionService_CheckPermission_Success (0.00s)
    --- PASS: TestHttpPermissionService_CheckPermission_Success/Permission_granted (0.00s)
    --- PASS: TestHttpPermissionService_CheckPermission_Success/Permission_denied (0.00s)
=== RUN   TestHttpPermissionService_CheckPermission_Error
=== RUN   TestHttpPermissionService_CheckPermission_Error/Server_error
=== RUN   TestHttpPermissionService_CheckPermission_Error/Bad_request
=== RUN   TestHttpPermissionService_CheckPermission_Error/Unauthorized
--- PASS: TestHttpPermissionService_CheckPermission_Error (0.00s)
    --- PASS: TestHttpPermissionService_CheckPermission_Error/Server_error (0.00s)
    --- PASS: TestHttpPermissionService_CheckPermission_Error/Bad_request (0.00s)
    --- PASS: TestHttpPermissionService_CheckPermission_Error/Unauthorized (0.00s)
=== RUN   TestHttpPermissionService_GetUserPermissions_Success
--- PASS: TestHttpPermissionService_GetUserPermissions_Success (0.00s)
=== RUN   TestHttpPermissionService_GetUserPermissions_Disabled
--- PASS: TestHttpPermissionService_GetUserPermissions_Disabled (0.00s)
=== RUN   TestHttpPermissionService_GetUserPermissions_Error
--- PASS: TestHttpPermissionService_GetUserPermissions_Error (0.00s)
=== RUN   TestLocalPermissionService_IsEnabled
=== RUN   TestLocalPermissionService_IsEnabled/Service_enabled
=== RUN   TestLocalPermissionService_IsEnabled/Service_disabled
--- PASS: TestLocalPermissionService_IsEnabled (0.00s)
    --- PASS: TestLocalPermissionService_IsEnabled/Service_enabled (0.00s)
    --- PASS: TestLocalPermissionService_IsEnabled/Service_disabled (0.00s)
=== RUN   TestLocalPermissionService_CheckPermission_Disabled
--- PASS: TestLocalPermissionService_CheckPermission_Disabled (0.00s)
=== RUN   TestLocalPermissionService_AddUserPermission
--- PASS: TestLocalPermissionService_AddUserPermission (0.00s)
=== RUN   TestLocalPermissionService_CheckPermission_ExactMatch
=== RUN   TestLocalPermissionService_CheckPermission_ExactMatch/Exact_match_with_sufficient_level
=== RUN   TestLocalPermissionService_CheckPermission_ExactMatch/Exact_match_with_equal_level
=== RUN   TestLocalPermissionService_CheckPermission_ExactMatch/Exact_match_with_insufficient_level
--- PASS: TestLocalPermissionService_CheckPermission_ExactMatch (0.00s)
    --- PASS: TestLocalPermissionService_CheckPermission_ExactMatch/Exact_match_with_sufficient_level (0.00s)
    --- PASS: TestLocalPermissionService_CheckPermission_ExactMatch/Exact_match_with_equal_level (0.00s)
    --- PASS: TestLocalPermissionService_CheckPermission_ExactMatch/Exact_match_with_insufficient_level (0.00s)
=== RUN   TestLocalPermissionService_CheckPermission_ParentMatch
=== RUN   TestLocalPermissionService_CheckPermission_ParentMatch/Child_context_with_sufficient_level
=== RUN   TestLocalPermissionService_CheckPermission_ParentMatch/Grandchild_context_with_sufficient_level
=== RUN   TestLocalPermissionService_CheckPermission_ParentMatch/Child_context_with_insufficient_level
=== RUN   TestLocalPermissionService_CheckPermission_ParentMatch/Different_hierarchy
--- PASS: TestLocalPermissionService_CheckPermission_ParentMatch (0.00s)
    --- PASS: TestLocalPermissionService_CheckPermission_ParentMatch/Child_context_with_sufficient_level (0.00s)
    --- PASS: TestLocalPermissionService_CheckPermission_ParentMatch/Grandchild_context_with_sufficient_level (0.00s)
    --- PASS: TestLocalPermissionService_CheckPermission_ParentMatch/Child_context_with_insufficient_level (0.00s)
    --- PASS: TestLocalPermissionService_CheckPermission_ParentMatch/Different_hierarchy (0.00s)
=== RUN   TestLocalPermissionService_CheckPermission_NoPermissions
--- PASS: TestLocalPermissionService_CheckPermission_NoPermissions (0.00s)
=== RUN   TestLocalPermissionService_CheckPermission_DeletedPermissions
--- PASS: TestLocalPermissionService_CheckPermission_DeletedPermissions (0.00s)
=== RUN   TestLocalPermissionService_CheckPermission_MultiplePermissions
=== RUN   TestLocalPermissionService_CheckPermission_MultiplePermissions/First_permission_context
=== RUN   TestLocalPermissionService_CheckPermission_MultiplePermissions/Second_permission_context
=== RUN   TestLocalPermissionService_CheckPermission_MultiplePermissions/Third_permission_context
=== RUN   TestLocalPermissionService_CheckPermission_MultiplePermissions/Child_of_first_permission
=== RUN   TestLocalPermissionService_CheckPermission_MultiplePermissions/Insufficient_level_for_first_permission
--- PASS: TestLocalPermissionService_CheckPermission_MultiplePermissions (0.00s)
    --- PASS: TestLocalPermissionService_CheckPermission_MultiplePermissions/First_permission_context (0.00s)
    --- PASS: TestLocalPermissionService_CheckPermission_MultiplePermissions/Second_permission_context (0.00s)
    --- PASS: TestLocalPermissionService_CheckPermission_MultiplePermissions/Third_permission_context (0.00s)
    --- PASS: TestLocalPermissionService_CheckPermission_MultiplePermissions/Child_of_first_permission (0.00s)
    --- PASS: TestLocalPermissionService_CheckPermission_MultiplePermissions/Insufficient_level_for_first_permission (0.00s)
=== RUN   TestLocalPermissionService_GetUserPermissions
--- PASS: TestLocalPermissionService_GetUserPermissions (0.00s)
=== RUN   TestLocalPermissionService_GetUserPermissions_FilterDeleted
--- PASS: TestLocalPermissionService_GetUserPermissions_FilterDeleted (0.00s)
=== RUN   TestLocalPermissionService_GetUserPermissions_NoUser
--- PASS: TestLocalPermissionService_GetUserPermissions_NoUser (0.00s)
=== RUN   TestLocalPermissionService_GetUserPermissions_Disabled
--- PASS: TestLocalPermissionService_GetUserPermissions_Disabled (0.00s)
=== RUN   TestMockPermissionService
--- PASS: TestMockPermissionService (0.00s)
=== RUN   TestMockPermissionService_Defaults
--- PASS: TestMockPermissionService_Defaults (0.00s)
=== RUN   TestAuthService_Authenticate
=== RUN   TestAuthService_Authenticate/Successful_authentication
=== RUN   TestAuthService_Authenticate/Failed_authentication
--- PASS: TestAuthService_Authenticate (0.00s)
    --- PASS: TestAuthService_Authenticate/Successful_authentication (0.00s)
    --- PASS: TestAuthService_Authenticate/Failed_authentication (0.00s)
=== RUN   TestAuthService_ValidateToken
=== RUN   TestAuthService_ValidateToken/Valid_token
=== RUN   TestAuthService_ValidateToken/Invalid_token
--- PASS: TestAuthService_ValidateToken (0.00s)
    --- PASS: TestAuthService_ValidateToken/Valid_token (0.00s)
    --- PASS: TestAuthService_ValidateToken/Invalid_token (0.00s)
=== RUN   TestAuthService_Disabled
=== RUN   TestAuthService_Disabled/Authenticate_when_disabled
=== RUN   TestAuthService_Disabled/ValidateToken_when_disabled
--- PASS: TestAuthService_Disabled (0.00s)
    --- PASS: TestAuthService_Disabled/Authenticate_when_disabled (0.00s)
    --- PASS: TestAuthService_Disabled/ValidateToken_when_disabled (0.00s)
=== RUN   TestAuthService_ContextTimeout
--- PASS: TestAuthService_ContextTimeout (2.00s)
=== RUN   TestPermissionService_CheckPermission
=== RUN   TestPermissionService_CheckPermission/Permission_allowed
=== RUN   TestPermissionService_CheckPermission/Permission_denied
--- PASS: TestPermissionService_CheckPermission (0.00s)
    --- PASS: TestPermissionService_CheckPermission/Permission_allowed (0.00s)
    --- PASS: TestPermissionService_CheckPermission/Permission_denied (0.00s)
=== RUN   TestPermissionService_GetUserPermissions
--- PASS: TestPermissionService_GetUserPermissions (0.00s)
=== RUN   TestPermissionService_IsEnabled
=== RUN   TestPermissionService_IsEnabled/Enabled_service
=== RUN   TestPermissionService_IsEnabled/Disabled_service
--- PASS: TestPermissionService_IsEnabled (0.00s)
    --- PASS: TestPermissionService_IsEnabled/Enabled_service (0.00s)
    --- PASS: TestPermissionService_IsEnabled/Disabled_service (0.00s)
=== RUN   TestPermissionService_Disabled
=== RUN   TestPermissionService_Disabled/CheckPermission_when_disabled_allows_all
=== RUN   TestPermissionService_Disabled/GetUserPermissions_when_disabled_returns_empty
--- PASS: TestPermissionService_Disabled (0.00s)
    --- PASS: TestPermissionService_Disabled/CheckPermission_when_disabled_allows_all (0.00s)
    --- PASS: TestPermissionService_Disabled/GetUserPermissions_when_disabled_returns_empty (0.00s)
=== RUN   TestMockAuthService
--- PASS: TestMockAuthService (0.00s)
PASS
coverage: 46.8% of statements
ok  	helixtrack.ru/core/internal/services	6.163s	coverage: 46.8% of statements
=== RUN   TestWebSocketConnection_Integration
{"level":"info","ts":1760636184.226818,"caller":"logger/logger.go:121","msg":"Starting WebSocket manager","maxClients":100,"path":"/ws"}
{"level":"info","ts":1760636184.2281964,"caller":"logger/logger.go:121","msg":"Client registered","clientId":"bee81ac7-b022-4ee2-bdad-595ca86a05b4","username":"testuser","activeClients":1}
{"level":"info","ts":1760636184.3293989,"caller":"logger/logger.go:121","msg":"Client unregistered","clientId":"bee81ac7-b022-4ee2-bdad-595ca86a05b4","username":"testuser","activeClients":0}
{"level":"info","ts":1760636184.3294835,"caller":"logger/logger.go:121","msg":"Stopping WebSocket manager"}
{"level":"info","ts":1760636184.329563,"caller":"logger/logger.go:121","msg":"WebSocket manager stopped"}
--- PASS: TestWebSocketConnection_Integration (0.10s)
=== RUN   TestWebSocketSubscription_Integration
    manager_integration_test.go:121: Integration test with timing/race conditions - requires improved test infrastructure
--- SKIP: TestWebSocketSubscription_Integration (0.00s)
=== RUN   TestWebSocketEventDelivery_Integration
    manager_integration_test.go:128: Integration test with timing/race conditions - requires improved test infrastructure
--- SKIP: TestWebSocketEventDelivery_Integration (0.00s)
=== RUN   TestWebSocketMultipleClients_Integration
    manager_integration_test.go:133: Integration test with timing/race conditions - requires improved test infrastructure
--- SKIP: TestWebSocketMultipleClients_Integration (0.00s)
=== RUN   TestWebSocketEventFiltering_Integration
    manager_integration_test.go:139: Integration test with timing/race conditions - requires improved test infrastructure
--- SKIP: TestWebSocketEventFiltering_Integration (0.00s)
=== RUN   TestWebSocketUnsubscribe_Integration
    manager_integration_test.go:145: Integration test with timing/race conditions - requires improved test infrastructure
--- SKIP: TestWebSocketUnsubscribe_Integration (0.00s)
=== RUN   TestWebSocketConcurrentEventDelivery_Integration
    manager_integration_test.go:151: Integration test with timing/race conditions - requires improved test infrastructure
--- SKIP: TestWebSocketConcurrentEventDelivery_Integration (0.00s)
=== RUN   TestWebSocketDisconnect_Integration
{"level":"info","ts":1760636184.3302903,"caller":"logger/logger.go:121","msg":"Starting WebSocket manager","maxClients":100,"path":"/ws"}
{"level":"info","ts":1760636184.3309314,"caller":"logger/logger.go:121","msg":"Client registered","clientId":"701d5671-2f1d-4498-983e-9b73df639805","username":"testuser","activeClients":1}
{"level":"info","ts":1760636184.4315705,"caller":"logger/logger.go:121","msg":"Client unregistered","clientId":"701d5671-2f1d-4498-983e-9b73df639805","username":"testuser","activeClients":0}
{"level":"info","ts":1760636184.6319835,"caller":"logger/logger.go:121","msg":"Stopping WebSocket manager"}
{"level":"info","ts":1760636184.6320827,"caller":"logger/logger.go:121","msg":"WebSocket manager stopped"}
--- PASS: TestWebSocketDisconnect_Integration (0.30s)
=== RUN   TestWebSocketProjectContextFiltering_Integration
    manager_integration_test.go:195: Project context filtering not yet implemented in manager
--- SKIP: TestWebSocketProjectContextFiltering_Integration (0.00s)
=== RUN   TestWebSocketPingPong_Integration
{"level":"info","ts":1760636184.632518,"caller":"logger/logger.go:121","msg":"Starting WebSocket manager","maxClients":100,"path":"/ws"}
{"level":"info","ts":1760636184.6331778,"caller":"logger/logger.go:121","msg":"Client registered","clientId":"e1490254-5f6a-4d8d-8d83-88452db6e231","username":"testuser","activeClients":1}
{"level":"info","ts":1760636184.833895,"caller":"logger/logger.go:121","msg":"Client unregistered","clientId":"e1490254-5f6a-4d8d-8d83-88452db6e231","username":"testuser","activeClients":0}
{"level":"info","ts":1760636184.8339593,"caller":"logger/logger.go:121","msg":"Stopping WebSocket manager"}
{"level":"info","ts":1760636184.8340116,"caller":"logger/logger.go:121","msg":"WebSocket manager stopped"}
--- PASS: TestWebSocketPingPong_Integration (0.20s)
=== RUN   TestWebSocketInvalidMessage_Integration
{"level":"info","ts":1760636184.8341758,"caller":"logger/logger.go:121","msg":"Starting WebSocket manager","maxClients":100,"path":"/ws"}
{"level":"info","ts":1760636184.8348188,"caller":"logger/logger.go:121","msg":"Client registered","clientId":"f6bf3e83-5521-43cd-a505-9683d12abd3b","username":"testuser","activeClients":1}
{"level":"error","ts":1760636184.8351223,"caller":"logger/logger.go:131","msg":"Failed to unmarshal WebSocket message","error":"invalid character 'i' looking for beginning of object key string","clientId":"f6bf3e83-5521-43cd-a505-9683d12abd3b","stacktrace":"helixtrack.ru/core/internal/logger.Error\n\t/home/milosvasic/Projects/HelixTrack/Core/Application/internal/logger/logger.go:131\nhelixtrack.ru/core/internal/websocket.(*Manager).readPump\n\t/home/milosvasic/Projects/HelixTrack/Core/Application/internal/websocket/manager.go:413"}
{"level":"info","ts":1760636184.9356015,"caller":"logger/logger.go:121","msg":"Client unregistered","clientId":"f6bf3e83-5521-43cd-a505-9683d12abd3b","username":"testuser","activeClients":0}
{"level":"info","ts":1760636184.9356751,"caller":"logger/logger.go:121","msg":"Stopping WebSocket manager"}
{"level":"info","ts":1760636184.9357376,"caller":"logger/logger.go:121","msg":"WebSocket manager stopped"}
--- PASS: TestWebSocketInvalidMessage_Integration (0.10s)
=== RUN   TestNewPublisher
--- PASS: TestNewPublisher (0.00s)
=== RUN   TestNewPublisher_Disabled
--- PASS: TestNewPublisher_Disabled (0.00s)
=== RUN   TestPublisher_PublishEvent
--- PASS: TestPublisher_PublishEvent (0.00s)
=== RUN   TestPublisher_PublishEvent_WhenDisabled
--- PASS: TestPublisher_PublishEvent_WhenDisabled (0.00s)
=== RUN   TestPublisher_PublishEvent_WithNilManager
--- PASS: TestPublisher_PublishEvent_WithNilManager (0.00s)
=== RUN   TestPublisher_PublishEntityEvent
--- PASS: TestPublisher_PublishEntityEvent (0.00s)
=== RUN   TestPublisher_PublishEntityEvent_WhenDisabled
--- PASS: TestPublisher_PublishEntityEvent_WhenDisabled (0.00s)
=== RUN   TestPublisher_IsEnabled
=== RUN   TestPublisher_IsEnabled/Publisher_enabled
=== RUN   TestPublisher_IsEnabled/Publisher_disabled
--- PASS: TestPublisher_IsEnabled (0.00s)
    --- PASS: TestPublisher_IsEnabled/Publisher_enabled (0.00s)
    --- PASS: TestPublisher_IsEnabled/Publisher_disabled (0.00s)
=== RUN   TestNoOpPublisher_PublishEvent
--- PASS: TestNoOpPublisher_PublishEvent (0.00s)
=== RUN   TestNoOpPublisher_PublishEntityEvent
--- PASS: TestNoOpPublisher_PublishEntityEvent (0.00s)
=== RUN   TestNoOpPublisher_IsEnabled
--- PASS: TestNoOpPublisher_IsEnabled (0.00s)
=== RUN   TestNewProjectContext
--- PASS: TestNewProjectContext (0.00s)
=== RUN   TestNewOrganizationContext
--- PASS: TestNewOrganizationContext (0.00s)
=== RUN   TestNewTeamContext
--- PASS: TestNewTeamContext (0.00s)
=== RUN   TestNewAccountContext
--- PASS: TestNewAccountContext (0.00s)
=== RUN   TestNewFullContext
--- PASS: TestNewFullContext (0.00s)
=== RUN   TestPublisher_MultipleEvents
--- PASS: TestPublisher_MultipleEvents (0.00s)
=== RUN   TestPublisher_ConcurrentPublishing
--- PASS: TestPublisher_ConcurrentPublishing (0.01s)
PASS
coverage: 50.9% of statements
ok  	helixtrack.ru/core/internal/websocket	1.772s	coverage: 50.9% of statements
